window.__require=function t(e,n,r){function o(i,c){if(!n[i]){if(!e[i]){var s=i.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=n[i]={exports:{}};e[i][0].call(u.exports,function(t){return o(e[i][1][t]||t)},u,u.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<r.length;i++)o(r[i]);return o}({AssetLoader:[function(t,e,n){"use strict";cc._RF.push(e,"f8add4KFgJOK72fxDP7mzOq","AssetLoader"),Object.defineProperty(n,"__esModule",{value:!0}),n.loadImgAtlas=void 0;var r=t("./Global");n.loadImgAtlas=function(){return new Promise(function(t,e){cc.loader.loadRes("images/Sprites",cc.SpriteAtlas,function(n,o){if(n)return console.log("Error loading card atlas",n),void e();console.log("Loaded card atlas successfully!"),r.default.instance.imageAtlas=o,t()})})},cc._RF.pop()},{"./Global":"Global"}],BlindSelectGroup:[function(t,e,n){"use strict";cc._RF.push(e,"3f0e6B/oWNCM6y4we2SAVIG","BlindSelectGroup");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../framework/clientEvent"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){},e.prototype.showEvent=function(){this.node.active=!0},e.prototype.hideEvent=function(){this.node.destroy()},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.selectRound=function(){i.clientEvent.dispatchEvent("roundStarted",[])},a([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../framework/clientEvent":"clientEvent"}],CardCount:[function(t,e,n){"use strict";cc._RF.push(e,"e4286K0UXRHup2DlREFxZKa","CardCount");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){},e.prototype.start=function(){},e.prototype.showEvent=function(){this.node.active=!0},e.prototype.hideEvent=function(){this.node.destroy()},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.update=function(){},e.prototype.setCompInfo=function(t,e){t&&(this.cardType.string=t.flowerId<4?t.symbol[0]:t.symbol),this.cardCount.string=e.toString()},a([s(cc.Label)],e.prototype,"cardType",void 0),a([s(cc.Label)],e.prototype,"cardCount",void 0),a([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],Card:[function(t,e,n){"use strict";cc._RF.push(e,"e4718zBBnRM/pm0ixsGwkCy","Card");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Constant"),s=t("../GameManager"),l=t("../Global"),u=t("../UIManager"),d=t("../framework/clientEvent"),p=cc._decorator,f=p.ccclass,h=p.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialPos=null,e.dragOffset=null,e.touchFirstPos=null,e.touchEndPos=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n._instance=this,this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.start=function(){},e.prototype.showEvent=function(){this.node.active=!0},e.prototype.hideEvent=function(){this.node.destroy()},e.prototype.setCardInfo=function(t){this.cardId=t.id,this.sprite.spriteFrame=l.default.instance.imageAtlas.getSpriteFrame(t.background)},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.update=function(){},e.prototype.onMouseEnter=function(){this.isDragging()||(this.node.scale=1.1,this.statusHover=!0,this.disable||d.clientEvent.dispatchEvent("cardHoverEvent",[this.cardId,!0]))},e.prototype.onMouseLeave=function(){this.node.scale=1,this.statusHover=!1,this.disable||d.clientEvent.dispatchEvent("cardHoverEvent",[this.cardId,!1])},e.prototype.isEnablePickCard=function(){return s.default._instance.gameSetting.gameProgress===c.GameProgress.Init||s.default._instance.gameSetting.gameProgress===c.GameProgress.Dragging},e.prototype.isDragging=function(){return s.default._instance.gameSetting.gameProgress===c.GameProgress.Dragging},e.prototype.pickCard=function(){var t=this;if(this.isEnablePickCard()&&!this.disable&&this.statusHover){var e=s.default._instance.gameSetting.handCards,n=e.filter(function(t){return t.cardStatus===c.CardStatus.Pick}).length,r=e.findIndex(function(e){return e.id===t.cardId}),o=e[r].cardStatus;if(o===c.CardStatus.Pick)this.node.setPosition(cc.v2(this.initialPos.x,this.initialPos.y-c.cardPopDistance)),d.clientEvent.dispatchEvent("pickCard",[c.CardStatus.Initial,this.cardId]);else{if(!(n<5)||o!==c.CardStatus.Initial&&void 0!==o)return;this.node.setPosition(cc.v2(this.initialPos.x,this.initialPos.y+c.cardPopDistance)),d.clientEvent.dispatchEvent("pickCard",[c.CardStatus.Pick,this.cardId])}}},e.prototype.onTouchStart=function(t){this.isEnablePickCard()&&!this.disable&&(this.initialPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.touchFirstPos=t.getLocation(),this.dragOffset=this.node.convertToNodeSpaceAR(this.touchFirstPos))},e.prototype.onTouchMove=function(t){var e=this;if(this.isEnablePickCard()&&!this.disable){s.default._instance.updateGameSetting({gameProgress:c.GameProgress.Dragging});var n=i(s.default._instance.gameSetting.handCards),r=t.getLocation(),o=this.node.parent.convertToNodeSpaceAR(r);this.node.position=new cc.Vec3(o.sub(this.dragOffset).x,o.sub(this.dragOffset).y,0);var a=n.findIndex(function(t){return t.id===e.cardId}),l=o.x-this.dragOffset.x-this.initialPos.x,p=Math.floor(Math.abs(l)/c.spacingForCard)*(Math.abs(l)/l);if(!(p===this.skipIndex||a+p<0||a+p>=n.length)){this.skipIndex=p;var f=i(s.default._instance.getUpdatedCardWhenDragging(n,a,a+this.skipIndex));u.default.instance.arrangeHandCardsWhenDragging(f,this.cardId),d.clientEvent.dispatchEvent("cardHoverEvent",[this.cardId,!1])}}},e.prototype.onTouchEnd=function(t){this.isEnablePickCard()&&!this.disable&&(s.default._instance.updateGameSetting({gameProgress:c.GameProgress.Init}),this.touchEndPos=t.getLocation(),Math.abs(this.touchEndPos.x-this.touchFirstPos.x)<30&&Math.abs(this.touchEndPos.y-this.touchFirstPos.y)<30?this.pickCard():this.dragCard(),this.skipIndex=-1)},e.prototype.dragCard=function(){var t=this;if(this.isEnablePickCard()&&!this.disable){var e=s.default._instance.gameSetting.handCards,n=e.findIndex(function(e){return e.id===t.cardId}),r=i(s.default._instance.getUpdatedCardWhenDragging(e,n,n+this.skipIndex));u.default.instance.arrangeHandCardsAfterDragging(r)}},e.prototype.onTouchCancel=function(){},a([h(cc.Animation)],e.prototype,"animation",void 0),a([h(cc.Sprite)],e.prototype,"sprite",void 0),n=a([f],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../Constant":"Constant","../GameManager":"GameManager","../Global":"Global","../UIManager":"UIManager","../framework/clientEvent":"clientEvent"}],Constant:[function(t,e,n){"use strict";var r,o,a,i,c;cc._RF.push(e,"38ac48JoGFC06K81HGpkDKj","Constant"),Object.defineProperty(n,"__esModule",{value:!0}),n.roundScore=n.scoreRule=n.Direction=n.GameProgress=n.SortTypes=n.ScoreTypes=n.suitColor=n.suitName=n.spacingForCard=n.cardPopDistance=n.gameSpeed=n.maxCardForOneRow=n.max_round=n.RoundFinishTypes=n.GameStartOption=n.CardStatus=n.CardFlower=void 0,function(t){t[t.Spade=0]="Spade",t[t.Heart=1]="Heart",t[t.Cube=2]="Cube",t[t.Diamond=3]="Diamond"}(i=n.CardFlower||(n.CardFlower={})),function(t){t[t.Initial=0]="Initial",t[t.Pick=1]="Pick",t[t.Pop=2]="Pop"}(n.CardStatus||(n.CardStatus={})),function(t){t[t.NewRun=0]="NewRun",t[t.Continue=1]="Continue",t[t.Challenge=2]="Challenge"}(n.GameStartOption||(n.GameStartOption={})),function(t){t[t.None=0]="None",t[t.Failed=1]="Failed",t[t.Success=2]="Success"}(n.RoundFinishTypes||(n.RoundFinishTypes={})),n.max_round=5,n.maxCardForOneRow=8,n.gameSpeed=1,n.cardPopDistance=30,n.spacingForCard=60,n.suitName=((r={})[i.Spade]="Spades",r[i.Heart]="Hearts",r[i.Cube]="Cubes",r[i.Diamond]="Diamonds",r),n.suitColor=((o={})[i.Spade]="#291c7f",o[i.Heart]="#ef164f",o[i.Cube]="#3b4245",o[i.Diamond]="#df5424",o),function(t){t[t.StraightFlush=0]="StraightFlush",t[t.FourOfAKind=1]="FourOfAKind",t[t.FullHouse=2]="FullHouse",t[t.Flush=3]="Flush",t[t.Straight=4]="Straight",t[t.ThreeOfAKind=5]="ThreeOfAKind",t[t.TwoPair=6]="TwoPair",t[t.Pair=7]="Pair",t[t.HighCard=8]="HighCard"}(c=n.ScoreTypes||(n.ScoreTypes={})),function(t){t[t.Rank=0]="Rank",t[t.Suit=1]="Suit",t[t.None=2]="None"}(n.SortTypes||(n.SortTypes={})),function(t){t[t.Init=0]="Init",t[t.FillingCard=1]="FillingCard",t[t.Poping=2]="Poping",t[t.PlayingHand=3]="PlayingHand",t[t.Dragging=4]="Dragging"}(n.GameProgress||(n.GameProgress={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(n.Direction||(n.Direction={})),n.scoreRule=((a={})[c.StraightFlush]=[{multi1:100,multi2:8,name:"Straight Flush",size:20}],a[c.FourOfAKind]=[{multi1:60,multi2:7,name:"Four of a Kind",size:20}],a[c.FullHouse]=[{multi1:40,multi2:4,name:"Full House",size:24}],a[c.Flush]=[{multi1:35,multi2:4,name:"Flush",size:30}],a[c.Straight]=[{multi1:30,multi2:4,name:"Straight",size:30}],a[c.ThreeOfAKind]=[{multi1:30,multi2:3,name:"Three of a Kind",size:20}],a[c.TwoPair]=[{multi1:20,multi2:2,name:"Two Pair",size:30}],a[c.Pair]=[{multi1:10,multi2:2,name:"Pair",size:30}],a[c.HighCard]=[{multi1:5,multi2:1,name:"High Card",size:24}],a),n.roundScore=[300,500,700],cc._RF.pop()},{}],Deck:[function(t,e,n){"use strict";cc._RF.push(e,"f4dadaR5ZhAu4z6grQxlAJR","Deck");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Constant"),c=t("../ModelManager"),s=t("../framework/clientEvent"),l=t("./CardCount"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){s.clientEvent.on("getDeckInfoEvent",this.getInfos,this)},e.prototype.onDisable=function(){s.clientEvent.off("getDeckInfoEvent",this.getInfos,this)},e.prototype.showEvent=function(){this.node.active=!0},e.prototype.hideEvent=function(){this.node.destroy()},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.update=function(){},e.prototype.getInfos=function(t){var e=this,n=t[0],r=t[1],o=t[2],a=c.default._instance.initialCards();if(0===this.topBar.children.length)for(var s=0;s<13;s++){var u=cc.instantiate(this.cardCount);this.topBar.addChild(u);var d=this.topBar.width,p=d/13-5;u.width=p,u.getComponent(l.default).setCompInfo(a[s],4),u.setPosition(cc.v3((p+5)*s-d/2+p/2,0,0))}this.topBar.children.forEach(function(t,e){t.getComponent(l.default).setCompInfo(null,n[e])}),this.spadesCount.string=r[i.CardFlower.Spade].toString(),this.heartsCount.string=r[i.CardFlower.Heart].toString(),this.cubesCount.string=r[i.CardFlower.Cube].toString(),this.diamondsCount.string=r[i.CardFlower.Diamond].toString();var f=this.spadesRow.width,h=f/13-5,g=this.spadesRow.height;0===this.spadesRow.children.length?o[i.CardFlower.Spade].forEach(function(t,n){var r=new cc.Node,o=r.addComponent(cc.Label);r.width=h,r.height=g,r.setPosition(cc.v3((h+5)*n-f/2+h/2,-17,0)),o.string=t.toString(),o.fontSize=17,e.spadesRow.addChild(r)}):this.spadesRow.children.forEach(function(t,e){t.getComponent(cc.Label).string=o[i.CardFlower.Spade][e].toString()}),0===this.heartsRow.children.length?o[i.CardFlower.Heart].forEach(function(t,n){var r=new cc.Node,o=r.addComponent(cc.Label);r.width=h,r.height=g,r.setPosition(cc.v3((h+5)*n-f/2+h/2,-17,0)),o.string=t.toString(),o.fontSize=17,e.heartsRow.addChild(r)}):this.heartsRow.children.forEach(function(t,e){t.getComponent(cc.Label).string=o[i.CardFlower.Heart][e].toString()}),0===this.cubesRow.children.length?o[i.CardFlower.Cube].forEach(function(t,n){var r=new cc.Node,o=r.addComponent(cc.Label);r.width=h,r.height=g,r.setPosition(cc.v3((h+5)*n-f/2+h/2,-17,0)),o.string=t.toString(),o.fontSize=17,e.cubesRow.addChild(r)}):this.cubesRow.children.forEach(function(t,e){t.getComponent(cc.Label).string=o[i.CardFlower.Cube][e].toString()}),0===this.diamondsRow.children.length?o[i.CardFlower.Diamond].forEach(function(t,n){var r=new cc.Node,o=r.addComponent(cc.Label);r.width=h,r.height=g,r.setPosition(cc.v3((h+5)*n-f/2+h/2,-17,0)),o.string=t.toString(),o.fontSize=17,e.diamondsRow.addChild(r)}):this.diamondsRow.children.forEach(function(t,e){t.getComponent(cc.Label).string=o[i.CardFlower.Diamond][e].toString()})},a([p(cc.Node)],e.prototype,"topBar",void 0),a([p(cc.Prefab)],e.prototype,"cardCount",void 0),a([p(cc.Label)],e.prototype,"spadesCount",void 0),a([p(cc.Label)],e.prototype,"heartsCount",void 0),a([p(cc.Label)],e.prototype,"cubesCount",void 0),a([p(cc.Label)],e.prototype,"diamondsCount",void 0),a([p(cc.Node)],e.prototype,"spadesRow",void 0),a([p(cc.Node)],e.prototype,"heartsRow",void 0),a([p(cc.Node)],e.prototype,"cubesRow",void 0),a([p(cc.Node)],e.prototype,"diamondsRow",void 0),a([d],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../Constant":"Constant","../ModelManager":"ModelManager","../framework/clientEvent":"clientEvent","./CardCount":"CardCount"}],FullDeckModal:[function(t,e,n){"use strict";cc._RF.push(e,"24feeGylexOaowvI90gNFjC","FullDeckModal");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../framework/clientEvent"),c=t("./Card"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.showEvent=function(){this.node.active=!0},e.prototype.hideEvent=function(){this.node.destroy()},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.update=function(){},e.prototype.init=function(t){for(var e=this.remainCountPanel.height/13-5,n=this.remainCountPanel.width,r=0;r<13;r++){var o=new cc.Node;o.width=n,o.height=e,o.setPosition(cc.v3(0,this.remainCountPanel.height-(e+5)*(r+1)-5,0));var a=new cc.Node,i=a.addComponent(cc.Label);i.fontSize=17,i.string=r<4?t[r].symbol[0]:t[r].symbol,a.setPosition(cc.v3(0,0,0));var s=new cc.Node,l=s.addComponent(cc.Label);l.fontSize=17,l.string="",s.setPosition(cc.v3(n,0,0)),o.addChild(a),o.addChild(s),this.remainCountPanel.addChild(o)}var u=this.cardsPanel.width,d=this.cardsPanel.height-50;for(r=0;r<t.length;r++){var p=cc.instantiate(this.card);this.cardsPanel.addChild(p),p.width=70,p.height=90,p.setPosition(cc.v3((u-70)/13*(r%13)+70,d-d/4*Math.floor(r/13)-45+25,0)),p.getComponent(c.default).setCardInfo(t[r]),p.getComponent(c.default).disable=!0,p.angle=2*-(r%13-6)}},e.prototype.setData=function(t,e){this.remainCountPanel.children.forEach(function(e,n){e.children[1].getComponent(cc.Label).string=t[n].toString()}),this.cardsPanel.children.forEach(function(t,n){0===e[Math.floor(n/13)][n%13]&&(t.opacity=150)})},e.prototype.onBack=function(){this.cardsPanel.children.forEach(function(t){t.opacity=255}),i.clientEvent.dispatchEvent("FullDeckHideEvent",[])},a([u(cc.Node)],e.prototype,"remainCountPanel",void 0),a([u(cc.Node)],e.prototype,"cardsPanel",void 0),a([u(cc.Prefab)],e.prototype,"card",void 0),a([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../framework/clientEvent":"clientEvent","./Card":"Card"}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"6a9b4XY8zVMwq/GBL5ol+Pk","GameManager");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./Constant"),l=t("./ModelManager"),u=t("./UIManager"),d=t("./framework/clientEvent"),p=cc._decorator,f=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n._instance=this,console.log("GameManager loaded")},e.prototype.start=function(){},e.prototype.onEnable=function(){d.clientEvent.on("pickCard",this.pickCardEvent,this),d.clientEvent.on("roundStarted",this.roundStartedEvent,this),d.clientEvent.on("fillCardEvent",this.fillCardEvent,this),d.clientEvent.on("cardHoverEvent",this.showCardTooltip,this)},e.prototype.onDisable=function(){d.clientEvent.off("pickCard",this.pickCardEvent,this),d.clientEvent.off("roundStarted",this.roundStartedEvent,this),d.clientEvent.off("fillCardEvent",this.fillCardEvent,this),d.clientEvent.off("cardHoverEvent",this.showCardTooltip,this)},e.prototype.roundInit=function(){this.gameSetting={gameStart:!1,round:0,gameProgress:s.GameProgress.Init,totalCardCount:52,remainCardCount:52,score:0,reachingScore:0,multi1:0,multi2:0,scoreType:null,hands:4,discards:4,cash:5,ante:1,totalAnte:8,remainHandCardsCount:0,newCards:[],handCards:[],scoreLevel:[0,0,0,0,0,0,0,0,0],sortType:s.SortTypes.Rank},this.updateGameSetting({})},e.prototype.updateGameSetting=function(t){this.gameSetting=a(a({},this.gameSetting),t),u.default.instance.changeGameValues(this.gameSetting)},e.prototype.roundStartedEvent=function(){var t;this.updateGameSetting({gameStart:!0,round:this.gameSetting.round+1,totalCardCount:52,remainCardCount:52,score:0,reachingScore:s.roundScore[this.gameSetting.round],multi1:0,multi2:0,hands:4,discards:4,cash:null!==(t=this.gameSetting.cash)&&void 0!==t?t:0,ante:this.gameSetting.ante,totalAnte:this.gameSetting.totalAnte,remainHandCardsCount:0,newCards:[],handCards:[],scoreLevel:c(this.gameSetting.scoreLevel),sortType:this.gameSetting.sortType}),l.default._instance.randomSortCards(),u.default.instance.hideBlindSelectModals(),this.fillCards()},e.prototype.fillCards=function(){var t=this.gameSetting.newCards,e=this.gameSetting.handCards,r=[];for(n._instance.gameSetting.remainHandCardsCount;e.length+r.length!==s.maxCardForOneRow&&0!==t.length;){var o=t.shift();r.push(o)}u.default.instance.fillCards(r),this.updateGameSetting({gameProgress:s.GameProgress.FillingCard})},e.prototype.addCardGroup=function(t){this.gameSetting.handCards.push(t)},e.prototype.updateArrangeForHandCards=function(){var t=this.gameSetting.handCards,e=this.gameSetting.sortType;e===s.SortTypes.Rank?t.sort(function(t,e){return t.flowerId-e.flowerId}):e===s.SortTypes.Suit&&(t.sort(function(t,e){return t.flowerId-e.flowerId}),t.sort(function(t,e){return t.cardFlower-e.cardFlower})),console.log({handCards:t}),this.gameSetting.handCards=c(t)},e.prototype.pickCardEvent=function(t){var e=t[0],n=t[1],r=this.gameSetting.handCards.findIndex(function(t){return t.id===n});-1!==r&&(this.gameSetting.handCards[r].cardStatus=e),u.default.instance.displayMultiInfo()},e.prototype.fillCardEvent=function(){this.updateGameSetting({remainCardCount:this.gameSetting.remainCardCount-1})},e.prototype.discardHandCards=function(t){this.gameSetting.handCards=this.gameSetting.handCards.map(function(e){return e.id===t?a(a({},e),{cardStatus:s.CardStatus.Pop}):e})},e.prototype.getSocreCardIdInPopedCards=function(t){var e,n=this.gameSetting.handCards.filter(function(e){return e.cardStatus===t}),r=[];if(0===n.length)return{scoreCards:r,scoreType:e};var o=n.sort(function(t,e){return t.flowerId-e.flowerId}),a=1,i=[1,1],c=[-1,-1],l=0,u=-2,d=n[0].cardFlower,p=!0;return o.forEach(function(t){t.flowerId-u==1?a++:a=1,t.flowerId===u?i[l]++:i[l]>=2&&l++,i[l]>=2&&(c[l]=t.flowerId),d!==t.cardFlower&&(p=!1),u=t.flowerId}),5===a&&p?(e=s.ScoreTypes.StraightFlush,n.forEach(function(t){return r.push(t.id)})):5!==a||p?4===i[0]?e=s.ScoreTypes.FourOfAKind:3===i[0]&&2===i[1]||2===i[0]&&3===i[1]?e=s.ScoreTypes.FullHouse:p&&5===n.length?(e=s.ScoreTypes.Flush,n.forEach(function(t){return r.push(t.id)})):3===i[0]?e=s.ScoreTypes.ThreeOfAKind:2===i[0]&&2===i[1]?e=s.ScoreTypes.TwoPair:2===i[0]?e=s.ScoreTypes.Pair:(e=s.ScoreTypes.HighCard,r.push(o[0].id)):(e=s.ScoreTypes.Straight,n.forEach(function(t){return r.push(t.id)})),e!==s.ScoreTypes.FourOfAKind&&e!==s.ScoreTypes.FullHouse&&e!==s.ScoreTypes.ThreeOfAKind&&e!==s.ScoreTypes.TwoPair&&e!==s.ScoreTypes.Pair||n.filter(function(t){return t.flowerId===c[0]||t.flowerId===c[1]}).forEach(function(t){r.push(t.id)}),{scoreCards:r,scoreType:e}},e.prototype.removePopedCards=function(){var t=this.gameSetting.handCards,e=[];t.forEach(function(t){t.cardStatus!==s.CardStatus.Pop&&e.push(t)}),this.updateGameSetting({handCards:e})},e.prototype.updateScore=function(){var t=n._instance.gameSetting.multi1*n._instance.gameSetting.multi2;this.updateGameSetting({multi1:0,multi2:0,scoreType:null}),u.default.instance.updateScore(t)},e.prototype.getUpdatedCardWhenDragging=function(t,e,n){var r=[];return(r=c(t.slice(0,e),t.slice(e+1))).splice(n,0,t[e]),r},e.prototype.rankSortHandle=function(){this.updateGameSetting({sortType:s.SortTypes.Rank}),u.default.instance.rankSortHandle()},e.prototype.suitSortHandle=function(){this.updateGameSetting({sortType:s.SortTypes.Suit}),u.default.instance.suitSortHandle()},e.prototype.showCardTooltip=function(t){var e=t[0],n=t[1],r=this.gameSetting.handCards,o=r.findIndex(function(t){return t.id===e});u.default.instance.showCardTooltip(r[o],n,o)},e.prototype.isFinishRound=function(){var t=this.gameSetting.score,e=this.gameSetting.round;return t>=s.roundScore[e-1]?s.RoundFinishTypes.Success:0===this.gameSetting.hands?s.RoundFinishTypes.Failed:s.RoundFinishTypes.None},e.prototype.showDeckModal=function(){var t=this.gameSetting.newCards,e=new Array(13).fill(0),n=new Array(4).fill(0),r=Array.from({length:4},function(){return new Array(13).fill(0)});t.forEach(function(t){e[t.flowerId]++,n[t.cardFlower]++,r[t.cardFlower][t.flowerId]++}),d.clientEvent.dispatchEvent("getDeckInfoEvent",[e,n,r])},e.prototype.getRemainCardInfo=function(){var t=this.gameSetting.newCards,e=new Array(13).fill(0),n=new Array(4).fill(0),r=Array.from({length:4},function(){return new Array(13).fill(0)});return t.forEach(function(t){e[t.flowerId]++,n[t.cardFlower]++,r[t.cardFlower][t.flowerId]++}),{numberCount:e,count:r}},n=i([f],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./Constant":"Constant","./ModelManager":"ModelManager","./UIManager":"UIManager","./framework/clientEvent":"clientEvent"}],GameRoot:[function(t,e,n){"use strict";cc._RF.push(e,"98dcdQl8GhEYLJRG8ap+Eh+","GameRoot");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.GameRoot=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=cc.Component,u=t("./audioManager"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._audioSource=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this.getComponent(cc.AudioSource);this._audioSource=t,cc.game.addPersistRootNode(this.node),u.audioManager.instance.init(this._audioSource)},e.prototype.onEnable=function(){u.audioManager.instance.playMusic(!0)},e.prototype.start=function(){"undefined"!=typeof cocosAnalytics&&cocosAnalytics.enableDebug(!0)},a([s(cc.AudioSource)],e.prototype,"_audioSource",void 0),a([c("GameRoot")],e)}(l);n.GameRoot=d,cc._RF.pop()},{"./audioManager":"audioManager"}],Global:[function(t,e,n){"use strict";cc._RF.push(e,"86ea2TjH51LgoVbKgxnbk6l","Global");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){this.imageAtlas=""}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!1,configurable:!0}),e=r([a],t)}());n.default=i,cc._RF.pop()},{}],LanguageData:[function(t,e){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=t("polyglot.min"),r=null;function o(t){return window.i18n.languages[t]}function a(t){t&&(r?r.replace(t):r=new n({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=o(t)||{};window.i18n.curLang=t,a(e),this.inst=r}},t:function(t,e){if(r)return r.t(t,e)},inst:r,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],n=0;n<t.length;++n){var r=t[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,r)}for(var o=0;o<e.length;++o){var a=e[o];a.node.active&&a.updateLabel()}for(var i=[],c=0;c<t.length;++c){var s=t[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(i,s)}for(var l=0;l<i.length;++l){var u=i[l];u.node.active&&u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabel:[function(t,e){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MainMenuManager:[function(t,e,n){"use strict";cc._RF.push(e,"001d0UVLsFD0ZTCoAfaeOHY","MainMenuManager");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./AssetLoader"),c=t("./framework/clientEvent"),s=t("./framework/uiManager"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){var t=this;i.loadImgAtlas().then(function(){console.log("successfully loaded atlas file"),t.background.node.active=!1}).catch(function(t){console.log({err:t})})},e.prototype.start=function(){},e.prototype.onEnable=function(){c.clientEvent.on("showPlayerSettingDialog",this.playButtonClicked,this)},e.prototype.onDisable=function(){c.clientEvent.off("hidePlayerSettingDialog",this.playButtonClicked,this)},e.prototype.playButtonClicked=function(){s.uiManager.instance.showDialog("StartOptionDialog",this.startOptionDialog)},a([d(cc.Prefab)],e.prototype,"startOptionDialog",void 0),a([d(cc.Button)],e.prototype,"background",void 0),a([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./AssetLoader":"AssetLoader","./framework/clientEvent":"clientEvent","./framework/uiManager":"uiManager"}],ModelManager:[function(t,e,n){"use strict";cc._RF.push(e,"5f584Z/3TZJtbD40Z7ZKLBa","ModelManager");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Constant"),c=t("./GameManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n._instance=this,console.log("Modelmanager loaded")},e.prototype.start=function(){},e.prototype.initialCards=function(){return[{id:0,symbol:"Aces",value:11,cardFlower:i.CardFlower.Spade,flowerId:0,background:"cards-spade-01"},{id:1,symbol:"King",value:10,cardFlower:i.CardFlower.Spade,flowerId:1,background:"cards-spade-K"},{id:2,symbol:"Queen",value:10,cardFlower:i.CardFlower.Spade,flowerId:2,background:"cards-spade-Q"},{id:3,symbol:"Jack",value:10,cardFlower:i.CardFlower.Spade,flowerId:3,background:"cards-spade-J"},{id:4,symbol:"10",value:10,cardFlower:i.CardFlower.Spade,flowerId:4,background:"cards-spade-10"},{id:5,symbol:"9",value:9,cardFlower:i.CardFlower.Spade,flowerId:5,background:"cards-spade-09"},{id:6,symbol:"8",value:8,cardFlower:i.CardFlower.Spade,flowerId:6,background:"cards-spade-08"},{id:7,symbol:"7",value:7,cardFlower:i.CardFlower.Spade,flowerId:7,background:"cards-spade-07"},{id:8,symbol:"6",value:6,cardFlower:i.CardFlower.Spade,flowerId:8,background:"cards-spade-06"},{id:9,symbol:"5",value:5,cardFlower:i.CardFlower.Spade,flowerId:9,background:"cards-spade-05"},{id:10,symbol:"4",value:4,cardFlower:i.CardFlower.Spade,flowerId:10,background:"cards-spade-04"},{id:11,symbol:"3",value:3,cardFlower:i.CardFlower.Spade,flowerId:11,background:"cards-spade-03"},{id:12,symbol:"2",value:2,cardFlower:i.CardFlower.Spade,flowerId:12,background:"cards-spade-02"},{id:13,symbol:"Aces",value:11,cardFlower:i.CardFlower.Heart,flowerId:0,background:"cards-heart-01"},{id:14,symbol:"King",value:10,cardFlower:i.CardFlower.Heart,flowerId:1,background:"cards-heart-K"},{id:15,symbol:"Queen",value:10,cardFlower:i.CardFlower.Heart,flowerId:2,background:"cards-heart-Q"},{id:16,symbol:"Jack",value:10,cardFlower:i.CardFlower.Heart,flowerId:3,background:"cards-heart-J"},{id:17,symbol:"10",value:10,cardFlower:i.CardFlower.Heart,flowerId:4,background:"cards-heart-10"},{id:18,symbol:"9",value:9,cardFlower:i.CardFlower.Heart,flowerId:5,background:"cards-heart-09"},{id:19,symbol:"8",value:8,cardFlower:i.CardFlower.Heart,flowerId:6,background:"cards-heart-08"},{id:20,symbol:"7",value:7,cardFlower:i.CardFlower.Heart,flowerId:7,background:"cards-heart-07"},{id:21,symbol:"6",value:6,cardFlower:i.CardFlower.Heart,flowerId:8,background:"cards-heart-06"},{id:22,symbol:"5",value:5,cardFlower:i.CardFlower.Heart,flowerId:9,background:"cards-heart-05"},{id:23,symbol:"4",value:4,cardFlower:i.CardFlower.Heart,flowerId:10,background:"cards-heart-04"},{id:24,symbol:"3",value:3,cardFlower:i.CardFlower.Heart,flowerId:11,background:"cards-heart-03"},{id:25,symbol:"2",value:2,cardFlower:i.CardFlower.Heart,flowerId:12,background:"cards-heart-02"},{id:26,symbol:"Aces",value:11,cardFlower:i.CardFlower.Cube,flowerId:0,background:"cards-club-01"},{id:27,symbol:"King",value:10,cardFlower:i.CardFlower.Cube,flowerId:1,background:"cards-club-K"},{id:28,symbol:"Queen",value:10,cardFlower:i.CardFlower.Cube,flowerId:2,background:"cards-club-Q"},{id:29,symbol:"Jack",value:10,cardFlower:i.CardFlower.Cube,flowerId:3,background:"cards-club-J"},{id:30,symbol:"10",value:10,cardFlower:i.CardFlower.Cube,flowerId:4,background:"cards-club-10"},{id:31,symbol:"9",value:9,cardFlower:i.CardFlower.Cube,flowerId:5,background:"cards-club-09"},{id:32,symbol:"8",value:8,cardFlower:i.CardFlower.Cube,flowerId:6,background:"cards-club-08"},{id:33,symbol:"7",value:7,cardFlower:i.CardFlower.Cube,flowerId:7,background:"cards-club-07"},{id:34,symbol:"6",value:6,cardFlower:i.CardFlower.Cube,flowerId:8,background:"cards-club-06"},{id:35,symbol:"5",value:5,cardFlower:i.CardFlower.Cube,flowerId:9,background:"cards-club-05"},{id:36,symbol:"4",value:4,cardFlower:i.CardFlower.Cube,flowerId:10,background:"cards-club-04"},{id:37,symbol:"3",value:3,cardFlower:i.CardFlower.Cube,flowerId:11,background:"cards-club-03"},{id:38,symbol:"2",value:2,cardFlower:i.CardFlower.Cube,flowerId:12,background:"cards-club-02"},{id:39,symbol:"Aces",value:11,cardFlower:i.CardFlower.Diamond,flowerId:0,background:"cards-diamond-01"},{id:40,symbol:"King",value:10,cardFlower:i.CardFlower.Diamond,flowerId:1,background:"cards-diamond-K"},{id:41,symbol:"Queen",value:10,cardFlower:i.CardFlower.Diamond,flowerId:2,background:"cards-diamond-Q"},{id:42,symbol:"Jack",value:10,cardFlower:i.CardFlower.Diamond,flowerId:3,background:"cards-diamond-J"},{id:43,symbol:"10",value:10,cardFlower:i.CardFlower.Diamond,flowerId:4,background:"cards-diamond-10"},{id:44,symbol:"9",value:9,cardFlower:i.CardFlower.Diamond,flowerId:5,background:"cards-diamond-09"},{id:45,symbol:"8",value:8,cardFlower:i.CardFlower.Diamond,flowerId:6,background:"cards-diamond-08"},{id:46,symbol:"7",value:7,cardFlower:i.CardFlower.Diamond,flowerId:7,background:"cards-diamond-07"},{id:47,symbol:"6",value:6,cardFlower:i.CardFlower.Diamond,flowerId:8,background:"cards-diamond-06"},{id:48,symbol:"5",value:5,cardFlower:i.CardFlower.Diamond,flowerId:9,background:"cards-diamond-05"},{id:49,symbol:"4",value:4,cardFlower:i.CardFlower.Diamond,flowerId:10,background:"cards-diamond-04"},{id:50,symbol:"3",value:3,cardFlower:i.CardFlower.Diamond,flowerId:11,background:"cards-diamond-03"},{id:51,symbol:"2",value:2,cardFlower:i.CardFlower.Diamond,flowerId:12,background:"cards-diamond-02"}]},e.prototype.randomSortCards=function(){for(var t=n._instance.initialCards(),e=c.default._instance.gameSetting.totalCardCount,r=[],o=0;o<e;o++){var a=n._instance.getRandomNumber(0,e-1);if(r[a]){if(o%e!=0){o--;continue}r=r.map(function(){return!1})}r[a]=!0,c.default._instance.gameSetting.newCards.push(t[a])}},e.prototype.getRandomNumber=function(t,e){return t>e?-1:Math.floor(Math.random()*(e-t+1))+t},e.prototype.getHandCardsCount=function(){return c.default._instance.gameSetting.handCards.filter(function(t){return t.cardStatus===i.CardStatus.Initial||t.cardStatus===i.CardStatus.Pick||!t.cardStatus}).length},e.prototype.getHandCardsCountByStatus=function(t){return c.default._instance.gameSetting.handCards.filter(function(e){return e.cardStatus===t}).length},n=a([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"./Constant":"Constant","./GameManager":"GameManager"}],SpriteFrameSet:[function(t,e){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=n,cc._RF.pop()},{}],StartOptionDialog:[function(t,e,n){"use strict";cc._RF.push(e,"5265ctAgfpO+Ilafhnkb5cX","StartOptionDialog");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Constant"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){this.buttonStatusChanged(i.GameStartOption.NewRun)},e.prototype.showEvent=function(){this.node.active=!0},e.prototype.hideEvent=function(){this.node.destroy()},e.prototype.show=function(){this.animation.play("open")},e.prototype.hide=function(){this.animation.play("close")},e.prototype.playClick=function(){cc.director.loadScene("GameBoard")},e.prototype.buttonStatusChanged=function(t){this.newGameButton.normalSprite=this.buttonNormalSpriteFrame,this.continueButton.normalSprite=this.buttonNormalSpriteFrame,this.challengeButton.normalSprite=this.buttonNormalSpriteFrame,t===i.GameStartOption.NewRun?this.newGameButton.normalSprite=this.buttonFocusSpriteFrame:t===i.GameStartOption.Continue?this.continueButton.normalSprite=this.buttonFocusSpriteFrame:t===i.GameStartOption.Challenge&&(this.challengeButton.normalSprite=this.buttonFocusSpriteFrame)},e.prototype.newGameButtonClicked=function(){this.buttonStatusChanged(i.GameStartOption.NewRun)},e.prototype.continueButtonClicked=function(){this.buttonStatusChanged(i.GameStartOption.Continue)},e.prototype.challengeButtonClicked=function(){this.buttonStatusChanged(i.GameStartOption.Challenge)},a([l(cc.Animation)],e.prototype,"animation",void 0),a([l(cc.Button)],e.prototype,"newGameButton",void 0),a([l(cc.Button)],e.prototype,"continueButton",void 0),a([l(cc.Button)],e.prototype,"challengeButton",void 0),a([l(cc.Button)],e.prototype,"backButton",void 0),a([l(cc.SpriteFrame)],e.prototype,"buttonFocusSpriteFrame",void 0),a([l(cc.SpriteFrame)],e.prototype,"buttonNormalSpriteFrame",void 0),a([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Constant":"Constant"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"071c3TpJEJHnZRVNJfIZ+bZ","UIManager");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./Constant"),s=t("./GameManager"),l=t("./ModelManager"),u=t("./framework/clientEvent"),d=t("./framework/uiManager"),p=t("./ui/Card"),f=t("./ui/FullDeckModal"),h=cc._decorator,g=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deckModalStatus=!1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this;var t=cc.instantiate(this.deckModal);this.deckModalNode.addChild(t),t.setPosition(cc.v3(0,0,0)),this.deckModalNode.active=!1,this.cardsGroupPanelY=this.handCardsPanel.getPosition().y,console.log("uimanager loaded")},e.prototype.start=function(){this.showBlindSelect(),s.default._instance.roundInit()},e.prototype.onEnable=function(){this.backCard.on(cc.Node.EventType.MOUSE_ENTER,this.onBackCardMouseEnter,this),this.backCard.on(cc.Node.EventType.MOUSE_LEAVE,this.onBackCardMouseLeave,this),this.backCard.on(cc.Node.EventType.MOUSE_DOWN,this.showFullDeckModal,this),u.clientEvent.on("FullDeckHideEvent",this.hideFullDeckModal,this)},e.prototype.onDisable=function(){this.backCard.off(cc.Node.EventType.MOUSE_ENTER,this.onBackCardMouseEnter,this),this.backCard.off(cc.Node.EventType.MOUSE_LEAVE,this.onBackCardMouseLeave,this),this.backCard.off(cc.Node.EventType.MOUSE_DOWN,this.showFullDeckModal,this),u.clientEvent.off("FullDeckHideEvent",this.hideFullDeckModal,this)},e.prototype.showBlindSelect=function(){if(s.default._instance.roundInit(),this.cardsGroup.removeAllChildren(),0===this.blindSelectPoint.children.length){var t=cc.instantiate(this.blindSelectEnableGroup),e=cc.instantiate(this.blindSelectDisableGroup),n=cc.instantiate(this.blindSelectDisableGroup);this.blindSelectPoint.addChild(t),this.blindSelectPoint.addChild(e),this.blindSelectPoint.addChild(n)}var r=this.blindSelectPoint.children[0].width;this.blindSelectPoint.children.forEach(function(t,e){var n=(r+15)*e+r/2;cc.tween(t).delay(.1*e/c.gameSpeed).call(function(){t.setPosition(n,-1e3,0)}).to(.2/c.gameSpeed,{position:cc.v3(n,50,0)},{easing:"quadInOut"}).to(.1/c.gameSpeed,{position:cc.v3(n,0,0)}).start()})},e.prototype.hideBlindSelectModals=function(){this.blindSelectPoint.children.forEach(function(t,e){console.log(e);var n=t.getPosition();cc.tween(t).delay(.1*e/c.gameSpeed).to(.1/c.gameSpeed,{position:cc.v3(n.x,50,0)}).to(.2/c.gameSpeed,{position:cc.v3(n.x,-1e3,0)}).start()})},e.prototype.showStartOptionDialog=function(){d.uiManager.instance.showDialog("StartOption",this.startOptionDialog)},e.prototype.changeGameValues=function(t){t.score>=0&&(this.scoreValue.string=t.score.toString()),t.multi1>=0&&(this.multiValue1.string=t.multi1.toString()),t.multi2>=0&&(this.multiValue2.string=t.multi2.toString()),t.hands>=0&&(this.handsValue.string=t.hands.toString()),t.discards>=0&&(this.discardsValue.string=t.discards.toString()),t.cash>=0&&(this.cashValue.string=t.cash.toString()),t.ante>=0&&(this.anteValue.string=t.ante.toString()),t.totalAnte>=0&&(this.anteTotal.string=t.totalAnte.toString()),t.totalCardCount>=0&&(this.totalCardsCount.string=t.totalCardCount.toString()),t.remainCardCount>=0&&(this.remainCardsCount.string=t.remainCardCount.toString()),t.reachingScore>=0&&(this.reachingScore.string=t.reachingScore.toString()),t.round>=0&&(this.roundValue.string=t.round.toString()),null!==t.scoreType?this.pockerHands.string="<color=#2a2a48><size="+c.scoreRule[t.scoreType][s.default._instance.gameSetting.scoreLevel[t.scoreType]].size+">"+c.scoreRule[t.scoreType][s.default._instance.gameSetting.scoreLevel[t.scoreType]].name+"</size></color> <color=#ffffff><size=17>lvl."+(t.scoreLevel[t.scoreType]+1).toString()+"</size></color>":this.pockerHands.string=""},e.prototype.fillCards=function(t){for(var e=this,n=0,r=function(r){var a=t[r],i=cc.instantiate(o.card);i.getComponent(p.default).setCardInfo(a);var l=o.backCard.convertToWorldSpaceAR(cc.v2(0,0)),d=o.cardsGroup.convertToNodeSpaceAR(l);i.setPosition(d),o.cardsGroup.addChild(i),cc.tween(i).delay((.1*r+.5)/c.gameSpeed).call(function(){s.default._instance.addCardGroup(a),e.arrangeHandCards(t.length,r+1,s.default._instance.gameSetting.sortType),++n===t.length&&s.default._instance.updateGameSetting({gameProgress:c.GameProgress.Init})}).call(function(){u.clientEvent.dispatchEvent("fillCardEvent",a.id)}).start()},o=this,a=0;a<t.length;a++)r(a)},e.prototype.HandButtonClick=function(){var t=this,e=s.default._instance.gameSetting.handCards;if(0!==e.length&&!1!==s.default._instance.gameSetting.gameStart){var n=l.default._instance.getHandCardsCountByStatus(c.CardStatus.Pick);if(0!==n){s.default._instance.updateGameSetting({gameProgress:c.GameProgress.PlayingHand});var r=this.cardsGroup.children,o=r[0].width,a=e.filter(function(t){return t.cardStatus===c.CardStatus.Pick}).length,i=0,u=0,d=this.handCardsPanel.getPosition();this.decreaseHands(),cc.tween(this.handCardsPanel).to(.1/c.gameSpeed,{position:cc.v3(d.x,d.y-80,0)}).call(function(){t.playButtonGroup.active=!1;var l=(o*a+10*(a-1))/2-o/2;e.forEach(function(e,a){if(e.cardStatus===c.CardStatus.Pick){var d=t.previewCardsGroup.parent.convertToWorldSpaceAR(t.previewCardsGroup.getPosition()),p=t.cardsGroup.convertToNodeSpaceAR(d);cc.tween(r[a]).delay((.2*i+.8)/c.gameSpeed).call(function(){s.default._instance.discardHandCards(e.id),t.arrangeHandCards(-1,0,c.SortTypes.None)}).to(.2/c.gameSpeed,{position:cc.v3(p.x-l+i*(o+10),p.y,0)}).call(function(){++u===n&&t.moveScoreCards()}).start(),i++}})}).start()}}},e.prototype.discardButtonClick=function(){var t=this;if(!(s.default._instance.gameSetting.discards<=0)){var e=s.default._instance.gameSetting.handCards;if(s.default._instance.updateGameSetting({gameProgress:c.GameProgress.PlayingHand}),0!==e.length){var n=l.default._instance.getHandCardsCountByStatus(c.CardStatus.Pick);if(0!==n){var r=this.cardsGroup.children;r[0].width,this.decreaseDiscards();var o=0,a=0;e.forEach(function(e,i){if(e.cardStatus===c.CardStatus.Pick){var l=r[i].getPosition();cc.tween(r[i]).delay((.2*o+.5)/c.gameSpeed).call(function(){s.default._instance.discardHandCards(e.id),t.arrangeHandCards(-1,0,c.SortTypes.None)}).to(.2/c.gameSpeed,{position:cc.v3(l.x+1e3,l.y,0)}).call(function(){n===++a&&t.removePopedCards()}).start(),o++}})}}}},e.prototype.rankSortHandle=function(){s.default._instance.updateGameSetting({sortType:c.SortTypes.Rank}),this.arrangeHandCards(0,0,s.default._instance.gameSetting.sortType)},e.prototype.suitSortHandle=function(){s.default._instance.updateGameSetting({sortType:c.SortTypes.Suit}),this.arrangeHandCards(0,0,s.default._instance.gameSetting.sortType)},e.prototype.arrangeHandCards=function(t,e,n){var r=this,o=l.default._instance.getHandCardsCount(),a=s.default._instance.gameSetting.handCards,u=this.cardsGroup.children,d=i(a);n===c.SortTypes.Rank?d.sort(function(t,e){return t.flowerId-e.flowerId}):n===c.SortTypes.Suit&&(d.sort(function(t,e){return t.flowerId-e.flowerId}),d.sort(function(t,e){return t.cardFlower-e.cardFlower}));var f=0;d.forEach(function(n){if(n.cardStatus===c.CardStatus.Initial||n.cardStatus===c.CardStatus.Pick||!n.cardStatus){var i=a.findIndex(function(t){return t.id===n.id});cc.tween(u[i]).to(.1/c.gameSpeed,{position:cc.v3(f*c.spacingForCard-c.spacingForCard*(o-1)/2+u[i].width/2,n.cardStatus===c.CardStatus.Pick?c.cardPopDistance:0,0)}).call(function(){t===e&&(r.cardsGroup.removeAllChildren(),d.forEach(function(t,e){var n=cc.instantiate(r.card);n.getComponent(p.default).setCardInfo(t),n.setPosition(cc.v3(e*c.spacingForCard-c.spacingForCard*(o-1)/2+n.width/2,t.cardStatus===c.CardStatus.Pick?c.cardPopDistance:0,0)),r.cardsGroup.addChild(n)}),s.default._instance.updateArrangeForHandCards())}).start(),f++}})},e.prototype.arrangeHandCardsAfterDragging=function(t){var e=this,n=this.cardsGroup.children,r=0,o=0,a=s.default._instance.gameSetting.handCards;t.forEach(function(l){if(l.cardStatus===c.CardStatus.Initial||l.cardStatus===c.CardStatus.Pick||!l.cardStatus){var u=a.findIndex(function(t){return t.id===l.id});cc.tween(n[u]).to(.1/c.gameSpeed,{position:cc.v3(r*c.spacingForCard-c.spacingForCard*(a.length-1)/2+n[u].width/2,l.cardStatus===c.CardStatus.Pick?c.cardPopDistance:0,0)}).call(function(){o++,a.length===o&&(e.cardsGroup.removeAllChildren(),t.forEach(function(n,r){var o=cc.instantiate(e.card);o.getComponent(p.default).setCardInfo(n),o.setPosition(cc.v3(r*c.spacingForCard-c.spacingForCard*(t.length-1)/2+o.width/2,n.cardStatus===c.CardStatus.Pick?c.cardPopDistance:0,0)),e.cardsGroup.addChild(o)}),s.default._instance.updateGameSetting({handCards:i(t)}))}).start(),r++}})},e.prototype.displayMultiInfo=function(){var t=s.default._instance.getSocreCardIdInPopedCards(c.CardStatus.Pick).scoreType;if(t){var e=c.scoreRule[t][s.default._instance.gameSetting.scoreLevel[t]].multi1,n=c.scoreRule[t][s.default._instance.gameSetting.scoreLevel[t]].multi2;this.multiValue1.string=e.toString(),this.multiValue2.string=n.toString(),s.default._instance.updateGameSetting({multi1:e,multi2:n,scoreType:t})}else s.default._instance.updateGameSetting({multi1:0,multi2:0,scoreType:null})},e.prototype.moveScoreCards=function(){var t=this,e=s.default._instance.getSocreCardIdInPopedCards(c.CardStatus.Pop),n=e.scoreCards,r=(e.scoreType,s.default._instance.gameSetting.handCards),o=this.cardsGroup.children,a=0;r.forEach(function(t,e){if(t.cardStatus===c.CardStatus.Pop&&void 0!==n.find(function(e){return e===t.id})){var r=o[e].getPosition();cc.tween(o[e]).delay((.5+.05*a)/c.gameSpeed).to(.1/c.gameSpeed,{position:cc.v3(r.x,r.y+50,0)}).start(),a++}}),a=0,r.forEach(function(e,r){e.cardStatus===c.CardStatus.Pop&&void 0!==n.find(function(t){return t===e.id})&&(cc.tween(o[r]).delay(1.5+.05*n.length+1*a).to(.1/c.gameSpeed,{scale:1.3,angle:5},{easing:"quadInOut"}).to(.1/c.gameSpeed,{scale:.7,angle:-5},{easing:"quadInOut"}).to(.1/c.gameSpeed,{scale:1,angle:0},{easing:"quadInOut"}).call(function(){var n=e.value+s.default._instance.gameSetting.multi1;s.default._instance.updateGameSetting({multi1:n}),t.multiValue1.string=n.toString()}).start(),a++)}),a=0;var i=0;r.forEach(function(t,e){if(t.cardStatus===c.CardStatus.Pop&&void 0!==n.find(function(e){return e===t.id})){var r=o[e].getPosition();cc.tween(o[e]).delay(1.5+1.05*n.length+.05*a).to(.1/c.gameSpeed,{position:cc.v3(r.x,r.y,0)}).call(function(){++i===n.length&&s.default._instance.updateScore()}).start(),a++}}),r.forEach(function(t,e){if(t.cardStatus===c.CardStatus.Pop){var r=o[e].getPosition();cc.tween(o[e]).delay((5+1.1*n.length+.05*a)/c.gameSpeed).to(.5/c.gameSpeed,{position:cc.v3(r.x+1e3,r.y,0)}).call(function(){}).start(),a--}});var l=this.handCardsPanel.getPosition();cc.tween(this.handCardsPanel).delay((6+1.15*n.length)/c.gameSpeed).to(.1/c.gameSpeed,{position:cc.v3(l.x,l.y+80,0)}).call(function(){t.playButtonGroup.active=!0,t.removePopedCards()}).start()},e.prototype.removePopedCards=function(){var t=this.cardsGroup.children,e=s.default._instance.gameSetting.handCards,n=[];e.forEach(function(e,r){e.cardStatus===c.CardStatus.Pop&&n.push(t[r])}),n.forEach(function(t){t&&t.isValid&&(t.removeFromParent(),t.destroy())}),s.default._instance.removePopedCards(),this.determineRoundFinish()},e.prototype.updateScore=function(t){var e=this;this.entryScore.string=t.toString();var n=t,r=Math.floor(t/10<1?t:10),o=Math.floor(t/r)<1?1:Math.floor(t/r)+1;cc.tween(this.entryScore.node).delay(1/c.gameSpeed).to(.1/c.gameSpeed,{scale:2}).to(.1/c.gameSpeed,{scale:1}).call(function(){}).start();for(var a=0;a<r;a++)cc.tween(this.entryScore).delay((2+.08*a)/c.gameSpeed).call(function(){var t=o;(n-=o)<0&&(t+=n,n=0),e.entryScore.string=0!==n?n.toString():"",s.default._instance.updateGameSetting({score:s.default._instance.gameSetting.score+t})}).start()},e.prototype.decreaseHands=function(){s.default._instance.updateGameSetting({hands:s.default._instance.gameSetting.hands-1}),cc.tween(this.handsValue.node).to(.3/c.gameSpeed,{scale:1.3}).to(.3/c.gameSpeed,{scale:1}).start()},e.prototype.decreaseDiscards=function(){s.default._instance.updateGameSetting({discards:s.default._instance.gameSetting.discards-1}),cc.tween(this.discardsValue.node).to(.3/c.gameSpeed,{scale:1.3}).to(.3/c.gameSpeed,{scale:1}).start()},e.prototype.arrangeHandCardsWhenDragging=function(t,e){var n=t.length,r=this.cardsGroup.children,o=s.default._instance.gameSetting.handCards,a=0;t.forEach(function(t){if(t.id!==e){var i=o.findIndex(function(e){return e.id===t.id});cc.tween(r[i]).to(.1/c.gameSpeed,{position:cc.v3(a*c.spacingForCard-c.spacingForCard*(n-1)/2+r[i].width/2,t.cardStatus===c.CardStatus.Pick?c.cardPopDistance:0,0)}).start(),a++}else a++})},e.prototype.showCardTooltip=function(t,e,n){e||(this.cardTooltipBox.active=e);var r=this.cardsGroup.children,o=r[n].convertToWorldSpaceAR(new cc.Vec3(0,0,0)),a=this.cardTooltipBox.parent.convertToNodeSpaceAR(o);this.cardTooltipBox.setPosition(new cc.Vec3(a.x,a.y+r[n].height,0)),this.cardName.string=t.symbol+" of <color="+c.suitColor[t.cardFlower]+">"+c.suitName[t.cardFlower]+"</color>",this.cardValue.string="<color=#6392f2>+"+t.value+"</color=#6392f2> chips",this.cardTooltipBox.active=e},e.prototype.determineRoundFinish=function(){var t=s.default._instance.isFinishRound();if(t===c.RoundFinishTypes.None)s.default._instance.fillCards();else if(t===c.RoundFinishTypes.Failed){this.loserModal.active=!0;var e=this.loserModal.getPosition();cc.tween(this.loserModal).to(.2/c.gameSpeed,{position:cc.v3(e.x,50,0)},{easing:"quadInOut"}).to(.1/c.gameSpeed,{position:cc.v3(e.x,0,0)},{easing:"quadInOut"}).start()}else t===c.RoundFinishTypes.Success&&(e=this.winnerModal.getPosition(),this.winnerModal.active=!0,cc.tween(this.winnerModal).to(.2/c.gameSpeed,{position:cc.v3(e.x,e.y+1050,0)},{easing:"quadInOut"}).to(.1/c.gameSpeed,{position:cc.v3(e.x,e.y+1e3,0)},{easing:"quadInOut"}).start())},e.prototype.onBackCardMouseEnter=function(){var t=this;if(s.default._instance.gameSetting.gameProgress===c.GameProgress.Init&&!1!==s.default._instance.gameSetting.gameStart&&!this.deckModalStatus){this.deckModalStatus=!0,this.deckModalNode.active=!0;var e=this.deckModalNode.children[0];cc.tween(e).call(function(){t.playButtonGroup.active=!1}).to(.1/c.gameSpeed,{position:cc.v3(0,-100,0)}).call(function(){}).start();var n=this.handCardsPanel.getPosition();cc.tween(this.handCardsPanel).to(.1/c.gameSpeed,{position:cc.v3(n.x,this.cardsGroupPanelY-100,0)}).start(),s.default._instance.showDeckModal()}},e.prototype.onBackCardMouseLeave=function(){if(this.deckModalStatus){this.deckModalStatus=!1,this.deckModalNode.active=!1;var t=this.deckModalNode.children[0];this.playButtonGroup.active=!0,cc.tween(t).call(function(){}).to(.1/c.gameSpeed,{position:cc.v3(0,100,0)}).start();var e=this.handCardsPanel.getPosition();cc.tween(this.handCardsPanel).to(.1/c.gameSpeed,{position:cc.v3(e.x,this.cardsGroupPanelY,0)}).start()}},e.prototype.showFullDeckModal=function(){if(!1!==s.default._instance.gameSetting.gameStart){if(0===this.fullDeckModalNode.children.length){var t=cc.instantiate(this.fullDeckModal);this.fullDeckModalNode.addChild(t),t.getComponent(f.default).init(l.default._instance.initialCards())}var e=this.fullDeckModalNode.children[0],n=s.default._instance.getRemainCardInfo(),r=n.numberCount,o=n.count;e.getComponent(f.default).setData(r,o);var a=e.getPosition();e.setPosition(cc.v3(a.x,-1e3,0)),cc.tween(e).to(.2/c.gameSpeed,{position:cc.v3(a.x,50,0)}).to(.1/c.gameSpeed,{position:cc.v3(a.x,0,0)}).start()}},e.prototype.hideFullDeckModal=function(){var t=this.fullDeckModalNode.children[0],e=t.getPosition();cc.tween(t).to(.1/c.gameSpeed,{position:cc.v3(e.x,50,0)}).to(.2/c.gameSpeed,{position:cc.v3(e.x,-1e3,0)}).start()},e.prototype.handleCashout=function(){var t=this,e=this.winnerModal.getPosition();cc.tween(this.winnerModal).to(.1/c.gameSpeed,{position:cc.v3(e.x,e.y+50,0)},{easing:"quadInOut"}).to(.1/c.gameSpeed,{position:cc.v3(e.x,e.y-1050,0)},{easing:"quadInOut"}).call(function(){t.showBlindSelect()}).start()},e.prototype.loserNewRun=function(){var t=this,e=this.loserModal.getPosition();cc.tween(this.loserModal).to(.1/c.gameSpeed,{position:cc.v3(e.x,50,0)},{easing:"quadInOut"}).to(.1/c.gameSpeed,{position:cc.v3(e.x,-1050,0)},{easing:"quadInOut"}).call(function(){t.showBlindSelect()}).start()},e.instance=null,a([y(cc.Prefab)],e.prototype,"startOptionDialog",void 0),a([y(cc.Node)],e.prototype,"blindSelectPoint",void 0),a([y(cc.Prefab)],e.prototype,"blindSelectDisableGroup",void 0),a([y(cc.Prefab)],e.prototype,"blindSelectEnableGroup",void 0),a([y(cc.Label)],e.prototype,"scoreValue",void 0),a([y(cc.Label)],e.prototype,"multiValue1",void 0),a([y(cc.Label)],e.prototype,"multiValue2",void 0),a([y(cc.Label)],e.prototype,"handsValue",void 0),a([y(cc.Label)],e.prototype,"discardsValue",void 0),a([y(cc.Label)],e.prototype,"cashValue",void 0),a([y(cc.Label)],e.prototype,"anteValue",void 0),a([y(cc.Label)],e.prototype,"anteTotal",void 0),a([y(cc.Label)],e.prototype,"roundValue",void 0),a([y(cc.Label)],e.prototype,"totalCardsCount",void 0),a([y(cc.Label)],e.prototype,"remainCardsCount",void 0),a([y(cc.Node)],e.prototype,"handCardsPanel",void 0),a([y(cc.Prefab)],e.prototype,"card",void 0),a([y(cc.Node)],e.prototype,"cardsGroup",void 0),a([y(cc.Node)],e.prototype,"backCard",void 0),a([y(cc.Node)],e.prototype,"previewCardsGroup",void 0),a([y(cc.Label)],e.prototype,"reachingScore",void 0),a([y(cc.RichText)],e.prototype,"pockerHands",void 0),a([y(cc.Label)],e.prototype,"entryScore",void 0),a([y(cc.Node)],e.prototype,"playButtonGroup",void 0),a([y(cc.Node)],e.prototype,"cardTooltipBox",void 0),a([y(cc.RichText)],e.prototype,"cardName",void 0),a([y(cc.RichText)],e.prototype,"cardValue",void 0),a([y(cc.Node)],e.prototype,"winnerModal",void 0),a([y(cc.Node)],e.prototype,"loserModal",void 0),a([y(cc.Node)],e.prototype,"deckModalNode",void 0),a([y(cc.Prefab)],e.prototype,"deckModal",void 0),a([y(cc.Node)],e.prototype,"fullDeckModalNode",void 0),a([y(cc.Prefab)],e.prototype,"fullDeckModal",void 0),n=a([g],e)}(cc.Component);n.default=v,cc._RF.pop()},{"./Constant":"Constant","./GameManager":"GameManager","./ModelManager":"ModelManager","./framework/clientEvent":"clientEvent","./framework/uiManager":"uiManager","./ui/Card":"Card","./ui/FullDeckModal":"FullDeckModal"}],audioManager:[function(t,e,n){"use strict";cc._RF.push(e,"e478cuMHJdIHa5fP3m5UZ7S","audioManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.audioManager=void 0;var r=cc._decorator,o=(r.ccclass,r.property,t("./configuration")),a=t("./resourceUtil"),i=function(){function t(){this.soundVolume=1}return Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new t,this._instance)},enumerable:!1,configurable:!0}),t.prototype.init=function(e){this.soundVolume=this.getConfiguration(!0)?1:0,t._audioSource=e},t.prototype.getConfiguration=function(t){var e;return void 0===(e=t?o.configuration.instance.getGlobalData("music"):o.configuration.instance.getGlobalData("sound"))||"true"===e},t.prototype.playMusic=function(e){var n=t._audioSource;n.loop=e,n.isPlaying||n.play()},t.prototype.pauseMusic=function(){var e=t._audioSource;e.isPlaying&&e.pause()},t.prototype.playSound=function(e){t._audioSource,a.resourceUtil.loadRes("audio/sound/"+e,cc.AudioClip,function(){})},t.prototype.playEffectSound=function(){t._audioSource},t.prototype.setMusicVolume=function(e){t._audioSource.volume=e},t.prototype.setSoundVolume=function(t){this.soundVolume=t},t.prototype.openMusic=function(){this.setMusicVolume(.8),o.configuration.instance.setGlobalData("music","true")},t.prototype.closeMusic=function(){this.setMusicVolume(0),o.configuration.instance.setGlobalData("music","false")},t.prototype.openSound=function(){this.setSoundVolume(1),o.configuration.instance.setGlobalData("sound","true")},t.prototype.closeSound=function(){this.setSoundVolume(0),o.configuration.instance.setGlobalData("sound","false")},t}();n.audioManager=i,cc._RF.pop()},{"./configuration":"configuration","./resourceUtil":"resourceUtil"}],clientEvent:[function(t,e,n){"use strict";cc._RF.push(e,"5a305zVBk5GUIdzJLbOwV+H","clientEvent");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.clientEvent=void 0;var i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.handlers={},a([c],e)}(t("./oneToMultiListener").oneToMultiListener));n.clientEvent=s,cc._RF.pop()},{"./oneToMultiListener":"oneToMultiListener"}],configuration:[function(t,e,n){"use strict";cc._RF.push(e,"05c37maoztIcqYQxP8Afj1j","configuration");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.configuration=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){this.jsonData=null,this.path=null,this.KEY_CONFIG="CarConfig",this.markSave=!1,this.saveTimer=-1}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance.start(),this._instance)},enumerable:!1,configurable:!0}),t.prototype.start=function(){var t,e=this;if(this.jsonData={userId:""},this.path=this.getConfigPath(),(t=cc.sys.isNative?jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:cc.sys.localStorage.getItem(this.KEY_CONFIG))&&t.length){t.startsWith("@")&&(t=t.substring(1));try{var n=JSON.parse(t);this.jsonData=n}catch(r){}}this.saveTimer=setInterval(function(){e.scheduleSave()},500)},t.prototype.setConfigDataWithoutSave=function(t,e){var n=this.jsonData.userId;this.jsonData[n]?this.jsonData[n][t]=e:console.error("no account can not save")},t.prototype.setConfigData=function(t,e){this.setConfigDataWithoutSave(t,e),this.markSave=!0},t.prototype.getConfigData=function(t){var e=this.jsonData.userId;return this.jsonData[e]?this.jsonData[e][t]||"":(cc.log("no account can not load"),"")},t.prototype.setGlobalData=function(t,e){this.jsonData[t]=e,this.save()},t.prototype.getGlobalData=function(t){return this.jsonData[t]},t.prototype.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},t.prototype.getUserId=function(){return this.jsonData.userId},t.prototype.scheduleSave=function(){this.markSave&&this.save()},t.prototype.markModified=function(){this.markSave=!0},t.prototype.save=function(){var t=JSON.stringify(this.jsonData);if(this.markSave=!1,cc.sys.isNative){var e={};e[this.KEY_CONFIG]=t,jsb.fileUtils.writeToFile(e,this.path)}else cc.sys.localStorage.setItem(this.KEY_CONFIG,t)},t.prototype.getConfigPath=function(){var t=cc.sys.os,e="";return t===cc.sys.OS_WINDOWS?e="src/conf":t===cc.sys.OS_LINUX?e="./conf":cc.sys.isNative?(e=jsb.fileUtils.getWritablePath(),e+="conf"):e="src/conf",e},t.prototype.parseUrl=function(t){if(t&&!("string"==typeof t&&t.length<=0)){var e={};"string"==typeof t?(t=t.split("?")[1]).split("&").forEach(function(t){var n=t.indexOf("=");if(-1!==n){var r=t.substring(0,n);e[r]=t.substring(n+1)}}):e=t,e.action&&this.setGlobalData("urlParams",e),e.source&&this.setGlobalData("source",e.source),e.adchannelid&&this.setGlobalData("adchannelid",e.adchannelid)}},t.generateGuestAccount=function(){return""+Date.now()+(0|(Math.random(),10))},e=r([a],t)}());n.configuration=i,cc._RF.pop()},{}],constant:[function(t,e,n){"use strict";cc._RF.push(e,"1ad87mpTDFDV7de0xMwTCq4","constant"),Object.defineProperty(n,"__esModule",{value:!0}),n.constant=void 0;var r=function(){function t(){}return t.GAME_NAME="car",t.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},t.MAX_LEVEL=20,t.MIN_CAR_ID=101,t.MAX_CAR_ID=109,t.AUDIO_SOUND={BACKGROUND:"background",CRASH:"crash",GET_MONEY:"getMoney",IN_CAR:"inCar",NEW_ORDER:"newOrder",CAR_START:"carStart",WIN:"win",STOP:"stop",TOOTING1:"tooting1",TOOTING2:"tooting2"},t.SIGNIN_REWARD_STATUS={RECEIVED:0,RECEIVABLE:1,UNRECEIVABLE:2,FILL_SIGNIN:3,AFTER_FILL_SIGNIN:4},t.MAX_SIGNIN_DAY=7,t.NORMAL_SHOW_TIME=3,t.NEWBEE_LEVEL=2,t.REWARD_TYPE={DIAMOND:1,GOLD:2,CAR:3},t.ONLINE={MAX_TIME:60,PROFIT_PER_SECOND:.3,TIME_PER_CIRCLE:10},t.SHARE_FUNCTION={BALANCE:"balance",RELIVE:"relive",OFFLINE:"offline",RANK:"rank",LOTTERY:"lottery",LOTTERY_REWARD:"lotteryReward",TRIAL:"trial",CLICK_BOX:"clickBox",ONLINE:"online",SIGNIN:"signIn",FILL_SIGNIN:"fillSignIn",INVINCIBLE:"invincible",SHOP_SHARE:"shopShare",SHOP_VIDEO:"shopVideo"},t.INITIAL_CAR=1,t.BUY_CAR_TYPE={GOLD:1,LOGIN:2,CONTINUOUS_LOGIN:3,SHARE:4,VIDEO:5,GAME:6,INVITE:7,SIGNIN:8,PASS_LEVEL:9},t.OPEN_REWARD_TYPE={AD:0,SHARE:1,NULL:2},t.GOLD_REWARD={SECOND:500,SEVENT:500},t.LOTTERY={MONEY:2e3,EXCHANGE:500},t.CUSTOMER_MAX_CNT=2,t.MENU_INIT_BOTTOM=40,t.MENU_BOTTOM=250,t}();n.constant=r,cc._RF.pop()},{}],csvManager:[function(t,e,n){"use strict";cc._RF.push(e,"64d5aR01mZIArZ14oqSxdz0","csvManager");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.csvManager=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,[",",";","\t","|","^"]),c=["\r\n","\r","\n"],s=function(t,e,n,r){return n instanceof Array?"number"===n[e]?Number(r[e]):"boolean"===n[e]?"true"===r[e]||"t"===r[e]||"1"===r[e]:r[e]:isNaN(Number(t))?"false"==t||"true"==t||"t"==t||"f"==t?"true"===r[e]||"t"===r[e]||"1"===r[e]:r[e]:Number(r[e])},l={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:i[0],newline:c[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,opts:{},assign:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Array.prototype.slice.call(arguments);for(var n=t[0],r=t.slice(1),o=0,a=r.length;o<a;o++)for(var i in r[o])n[i]=r[o][i];return n},map:function(t,e){for(var n=[],r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);return n},getType:function(t){return Object.prototype.toString.call(t).slice(8,-1)},getLimit:function(t,e){return!1===t?e:1},buildObjectConstructor:function(t,e,n){return function(r){var o={},a=function(t,e){return o[t]=e};return n?t.forEach(function(t,o){a(t,s(e[o],o,n,r))}):t.forEach(function(t,n){a(t,s(e[n],n,null,r))}),o}},buildArrayConstructor:function(t,e,n){return function(r){var o=new Array(e.length),a=function(t,e){return o[t]=e};return n?t.forEach(function(t,o){a(t,s(e[o],o,n,r))}):t.forEach(function(t,n){a(t,s(e[n],n,null,r))}),o}},frequency:function(t,e,n){void 0===n&&(n=!1);for(var r=0,o=0,a=this.getLimit(n,t.length);o<a&&-1!==(o=t.indexOf(e,o));)o+=1,r++;return r},mostFrequent:function(t,e,n){for(var r="",o=e.length-1;o>=0;o--)this.frequency(t,e[o],n)>0&&(r=e[o]);return r||e[0]},unsafeParse:function(t,e,n){var r,o,a=t.split(e.newline);function i(t){var n=t.shift();if(n.indexOf('"')>=0){for(var r=0,o=0,a=0;t.length>0&&(-1!==(r=n.indexOf('"',o))||a%2!=0);)-1!==r?(o=r+1,a++):n=n+e.newline+t.shift();var i=[],c=void 0,s=0,l=0,u=0,d=n.length;for(var p in n)if(n.hasOwnProperty(p)){var f=parseInt(p),h=n[p];0===f&&'"'===h&&(s++,l=1),'"'===h&&(s++,n[f-1]===e.delimiter&&l===f&&l++),'"'===h&&s%2==0&&(n[f+1]!==e.delimiter&&f+1!==d||(u=f,c=n.substring(l,u),i.push(c),u=l=u+2)),h===e.delimiter&&s%2==0&&((u=f)>l?(c=n.substring(l,u),i.push(c),u=l=u+1):u===l&&(i.push(""),u=l=u+1))}return(u=d)>=l&&(c=n.substring(l,u),i.push(c)),i}return n.split(e.delimiter)}for(e.skip>0&&a.splice(e.skip),e.header?(!0===e.header?(e.comment=i(a),e.cast=i(a),r=i(a)):"Array"===this.getType(e.header)&&(r=e.header),o=this.buildObjectConstructor(r,a[0].split(e.delimiter),e.cast)):o=this.buildArrayConstructor(r,a[0].split(e.delimiter),e.cast);a.length>0;){var c=i(a);c.length>1&&n(o(c),r[0])}return!0},safeParse:function(t,e){var n=e.newline,r=t.split(n);return e.skip>0&&r.splice(e.skip),!0},encodeCells:function(t,e,n){for(var r=t.slice(0),o=0,a=r.length;o<a;o++)-1!==r[o].indexOf(this.quoteMark)&&(r[o]=r[o].replace(this.quoteRegex,this.doubleQuoteMark)),-1===r[o].indexOf(e)&&-1===r[o].indexOf(n)||(r[o]=this.quoteMark+r[o]+this.quoteMark);return r.join(e)},encodeArrays:function(t,e,n){var r=e.delimiter,o=e.newline;e.header&&"Array"===this.getType(e.header)&&n(this.encodeCells(e.header,r,o));for(var a=0,i=this.getLimit(e.limit,t.length);a<i;a++)n(this.encodeCells(t[a],r,o));return!0},encodeObjects:function(t,e,n){var r=e.delimiter,o=e.newline,a=[],i=[];for(var c in t[0])a.push(c),i.push(t[0][c]);!0===e.header?n(this.encodeCells(a,r,o)):"Array"===this.getType(e.header)&&n(this.encodeCells(e.header,r,o)),n(this.encodeCells(i,r,"\n"));for(var s=1,l=this.getLimit(e.limit,t.length);s<l;s++){i=[];for(var u=0,d=a.length;u<d;u++)i.push(t[s][a[u]]);n(this.encodeCells(i,r,o))}return!0},parse:function(t,e,n){var r=[];if("Function"===this.getType(e)?(n=e,e={}):"Function"!==this.getType(n)&&(n=r.push.bind(r)),e=this.assign({},this.STANDARD_DECODE_OPTS,e),this.opts=e,!e.delimiter||!e.newline){var o=Math.min(48,Math.floor(t.length/20),t.length);e.delimiter=e.delimiter||this.mostFrequent(t,i,0!==o),e.newline=e.newline||this.mostFrequent(t,c,0!==o)}return this.unsafeParse(t,e,n)&&(!(r.length>0)||r)},encode:function(t,e,n){var r=[];return"Function"===this.getType(e)?n=e:"Function"!==this.getType(n)&&(n=(r=[]).push.bind(r)),(e=this.assign({},this.STANDARD_ENCODE_OPTS,e)).skip>0&&(t=t.slice(e.skip)),("Array"===this.getType(t[0])?this.encodeArrays:this.encodeObjects)(t,e,n)&&(!(r.length>0)||r.join(e.newline))}},u=function(){function t(){this.csvTables={},this.csvTableForArr={},this.tableCast={},this.tableComment={}}return t.prototype.addTable=function(t,e,n){if(!this.csvTables[t]||n){var r={},o=[];l.parse(e,{header:!0},function(t,e){r[t[e]]=t,o.push(t)}),this.tableCast[t]=l.opts.cast,this.tableComment[t]=l.opts.comment,this.csvTables[t]=r,this.csvTableForArr[t]=o}},t.prototype.getTableArr=function(t){return this.csvTableForArr[t]},t.prototype.getTable=function(t){return this.csvTables[t]},t.prototype.queryOne=function(t,e,n){var r=this.getTable(t);if(!r)return null;if(!e)return r[n];for(var o in r)if(r.hasOwnProperty(o)&&r[o][e]===n)return r[o]},t.prototype.queryByID=function(t,e){return this.queryOne(t,null,e)},t.prototype.queryAll=function(t,e,n){var r=this.getTable(t);if(!r||!e)return null;var o={};for(var a in r)r.hasOwnProperty(a)&&r[a][e]===n&&(o[a]=r[a]);return o},t.prototype.queryIn=function(t,e,n){var r=this.getTable(t);if(!r||!e)return null;for(var o={},a=Object.keys(r),i=a.length,c=0;c<i;c++){var s=r[a[c]];n.indexOf(s[e])>-1&&(o[a[c]]=s)}return o},t.prototype.queryByCondition=function(t,e){if(e.constructor!==Object)return null;var n=this.getTable(t);if(!n)return null;for(var r={},o=Object.keys(n),a=o.length,i=Object.keys(e),c=i.length,s=0;s<a;s++){for(var l=n[o[s]],u=!0,d=0;d<c;d++){var p=i[d];u=u&&e[p].indexOf(l[p])>-1&&!r[o[s]]}u&&(r[o[s]]=l)}return r},r([a("csvManager")],t)}();n.csvManager=u,cc._RF.pop()},{}],eventListener:[function(t,e,n){"use strict";cc._RF.push(e,"10a09om3sZD8q2H50TLwLIc","eventListener");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.eventListener=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){this.supportEvent={},this.handle={},this.supportEvent=null}return t.prototype.on=function(t,e,n){this.handle[t]={handler:e,target:n}},t.prototype.off=function(t,e){var n=this.handle[t];n&&n.handler&&n.handler===e&&delete this.handle[t]},t.prototype.dispatchEvent=function(t){if(null===this.supportEvent||this.supportEvent.hasOwnProperty(t)){for(var e=this.handle[t],n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);e.handler?e.handler.apply(e.target,n):cc.log("not register "+t+"    callback func")}else cc.error("please add the event into clientEvent.js")},t.prototype.setSupportEventList=function(t){if(!(t instanceof Array))return cc.error("supportEvent was not array"),!1;for(var e in this.supportEvent={},t){var n=t[e];this.supportEvent[n]=e}return!0},r([a],t)}()),c=function(){function t(){}return t.getBaseClass=function(){return i},r([a("eventListener")],t)}();n.eventListener=c,cc._RF.pop()},{}],localConfig:[function(t,e,n){"use strict";cc._RF.push(e,"acd0cVlaIhLurmAIUS/N+2B","localConfig");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.localConfig=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,t("./resourceUtil")),c=t("./csvManager"),s=function(){function t(){this.csvManager=null,this.arrCars=[],this._callback=null,this._skills={},this.currentLoad=0,this.cntLoad=0,this.servers=[]}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!1,configurable:!0}),t.prototype.loadConfig=function(t){this._callback=t,this.csvManager=new c.csvManager,this.loadCSV()},t.prototype.loadCSV=function(){var t=this,e=["talk","car","signIn"];this.cntLoad=e.length+1,e.forEach(function(e){i.resourceUtil.getData(e,function(n,r){t.csvManager.addTable(e,r),t.tryToCallbackOnFinished()})}),i.resourceUtil.getJsonData("servers",function(e,n){t.servers=n,t.tryToCallbackOnFinished()})},t.prototype.queryOne=function(t,e,n){return this.csvManager.queryOne(t,e,n)},t.prototype.queryByID=function(t,e){return this.csvManager.queryByID(t,e)},t.prototype.getTable=function(t){return this.csvManager.getTable(t)},t.prototype.getTableArr=function(t){return this.csvManager.getTableArr(t)},t.prototype.getCars=function(){if(this.arrCars.length>0)return this.arrCars;var t=e.instance.getTableArr("car");return this.arrCars=t.sort(function(t,e){return t.sort-e.sort}),this.arrCars},t.prototype.queryAll=function(t,e,n){return this.csvManager.queryAll(t,e,n)},t.prototype.queryIn=function(t,e,n){return this.csvManager.queryIn(t,e,n)},t.prototype.queryByCondition=function(t,e){return this.csvManager.queryByCondition(t,e)},t.prototype.tryToCallbackOnFinished=function(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())},t.prototype.getCurrentServer=function(){return this.servers[0]},t.prototype.getVersion=function(){var t=this.getCurrentServer();return t?t.version:"unknown"},e=r([a("localConfig")],t)}();n.localConfig=s,cc._RF.pop()},{"./csvManager":"csvManager","./resourceUtil":"resourceUtil"}],lodash:[function(t,e,n){"use strict";cc._RF.push(e,"8cbacDdVTBOgZQMyvQzOeAz","lodash");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.lodash=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){}var e;return e=t,t.find=function(t,e){var n;if(Array.isArray(t)||(t=this.toArray(t)),(n=t.filter(e)).length)return n[0]},t.forEach=function(t,e){Array.isArray(t)?t.forEach(e):this.toArrayKey(t).forEach(function(n){var r=n.key,o=n.value;e(o,r,t)})},t.cloneDeep=function(t){if(null===t||"object"!=typeof t)return t;var e={};for(var n in t.constructor===Array&&(e=[]),t)t.hasOwnProperty(n)&&(e[n]=this.cloneDeep(t[n]));return e},t.map=function(t,e){Array.isArray(t)||(t=this.toArray(t));var n=[];return t.forEach(function(t,r,o){n.push(e(t,r,o))}),n},t.random=function(t,e){var n=Math.random()*(e-t+1)+t;return Math.floor(n)},t.toArrayKey=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({key:n,value:t[n]});return e},t.toArray=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},t.filter=function(t,e){return Array.isArray(t)||(t=this.toArray(t)),t.filter(e)},t.isEqual=function(t,e){var n=t instanceof Object,r=e instanceof Object;if(!n||!r)return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t){var a=t[o]instanceof Object,i=e[o]instanceof Object;if(a&&i)return this.isEqual(t[o],e[o]);if(t[o]!==e[o])return!1}return!0},t.pullAllWith=function(t,e,n){return e.forEach(function(e){t.filter(function(t){return n(t,e)}).forEach(function(e){var n=t.indexOf(e);-1!==t.indexOf(e)&&t.splice(n,1)})}),t},t.now=function(){return Date.now()},t.pullAll=function(t,e){return e.forEach(function(e){var n=t.indexOf(e);-1!==t.indexOf(e)&&t.splice(n,1)}),t},t.forEachRight=function(t,e){Array.isArray(t)||(t=this.toArray(t));for(var n=t.length-1;n>=0&&e(t[n]);n--);},t.startsWith=function(t,e,n){return(t=t.substr(n)).startsWith(e)},t.endsWith=function(t,e,n){return(t=t.substr(n)).endsWith(e)},t.remove=function(t,e){var n=[],r=[];return t.forEach(function(t,o){e(t)&&(n.push(t),r.push(o))}),this.basePullAt(t,r),n},t.basePullAt=function(t,e){for(var n,r=t?e.length:0,o=r-1;r--;){var a=e[r];r!==o&&a===n||(n=a,Array.prototype.splice.call(t,a,1))}return t},t.findIndex=function(t,e,n){var r;if(t=t.slice(n),"function"==typeof e){for(r=0;r<t.length;r++)if(e(t[r]))return r}else if(Array.isArray(e))for(r=0;r<t.length;r++){var o=e[0],a=!0;if(e.length>1&&(a=e[1]),t[r][o]===a)return r}else for(r=0;r<t.length;r++)if(t[r]===e)return r;return-1},t.concat=function(){var t=arguments.length;if(!t)return[];for(var e=arguments[0],n=1;n<t;)e=e.concat(arguments[n]),n++;return e},t.isNumber=function(t){return"number"==typeof t},t.indexOf=function(t,e,n){return(t=t.slice(n)).indexOf(e)},t.join=function(t,e){if(null===t)return"";var n="";return t.forEach(function(t){n+=t+e}),n.substr(0,n.length-1)},t.split=function(t,e,n){return t.split(e,n)},t.max=function(t){if(t&&t.length){for(var e,n=0;n<t.length;n++)0===n?e=t[0]:e<t[n]&&(e=t[n]);return e}},t.drop=function(t,e){return null!==t&&t.length?t.slice(e):[]},t.flattenDeep=function(t){return t.reduce(function(t,e){return t.concat(e)})},t.uniq=function(t){var e=[];return t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e},t.isNaN=function(t){return this.isNumber(t)&&t!==+t},t.chunk=function(t,e){if(null===t||!t.length||e<1)return[];for(var n=[];t.length>e;)n.push(t.slice(0,e)),t=t.slice(e);return n.push(t),n},t.toFinite=function(t){return t?(t=Number(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},t.baseRange=function(t,e,n,r){for(var o=-1,a=(0,Math.max)((0,Math.ceil)((e-t)/(n||1)),0),i=Array(a);a--;)i[r?a:++o]=t,t+=n;return i},t.isObject=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)},t.isLength=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e.MAX_SAFE_INTEGER},t.isArrayLike=function(t){return null!==t&&this.isLength(t.length)},t.eq=function(t,e){return t===e||t!=t&&e!=e},t.isIndex=function(t,n){var r=typeof t;return!!(n=null===n?e.MAX_SAFE_INTEGER:n)&&("number"===r||"symbol"!==r&&/^(?:0|[1-9]\d*)$/.test(t))&&t>-1&&t%1==0&&t<n},t.isIterateeCall=function(t,e,n){if(!this.isObject(n))return!1;var r=typeof e;return!!("number"===r?this.isArrayLike(n)&&this.isIndex(e,n.length):"string"===r&&e in n)&&this.eq(n[e],t)},t.createRange=function(t){var e=this;return function(n,r,o){return o&&"number"!=typeof o&&e.isIterateeCall(n,r,o)&&(r=o=void 0),n=e.toFinite(n),void 0===r?(r=n,n=0):r=e.toFinite(r),o=void 0===o?n<r?1:-1:e.toFinite(o),e.baseRange(n,r,o,t)}.bind(this)},t.maxBy=function(t,e){if(t&&t.length){for(var n=-1,r=-1,o=0;o<t.length;o++)0===o?(n=e(t[0]),r=t[0]):n<t[o]&&(n=t[o],r=t[o]);return r}},t.minBy=function(t,e){if(t&&t.length){for(var n=-1,r=-1,o=0;o<t.length;o++)0===o?(n=e(t[0]),r=t[0]):n>t[o]&&(n=e(t[o]),r=t[o]);return r}},t.sumBy=function(t,e){var n=0;for(var r in t)n+=e(t[r]);return n},t.countBy=function(t){var e={};for(var n in t){var r=t[n];e.hasOwnProperty(r)?e[r]+=1:e[r]=1}return e},t.MAX_SAFE_INTEGER=9007199254740991,e=r([a("lodash")],t)}());n.lodash=i,cc._RF.pop()},{}],oneToMultiListener:[function(t,e,n){"use strict";cc._RF.push(e,"10a25g6TDNP2IICdF4Htopx","oneToMultiListener");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.oneToMultiListener=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){}return t.on=function(t,e,n){var r={handler:e,target:n},o=this.handlers[t];o||(o=[],this.handlers[t]=o);for(var a=0;a<o.length;a++)if(!o[a])return o[a]=r,a;return o.push(r),o.length},t.off=function(t,e,n){var r=this.handlers[t];if(r)for(var o=0;o<r.length;o++){var a=r[o];if(a.handler===e&&(!n||n===a.target)){r.splice(o,1);break}}},t.dispatchEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,o=this.handlers[t],a=[];for(r=1;r<arguments.length;r++)a.push(arguments[r]);if(o)for(r=0;r<o.length;r++){var i=o[r];i.handler&&i.handler.apply(i.target,e)}},t.setSupportEventList=function(t){if(!(t instanceof Array))return cc.error("supportEvent was not array"),!1;for(var e in this.supportEvent={},t){var n=t[e];this.supportEvent[n]=e}return!0},r([a("oneToMultiListener")],t)}());n.oneToMultiListener=i,cc._RF.pop()},{}],playerData:[function(t,e,n){"use strict";cc._RF.push(e,"985d59n5DNIrIcY9mIscZXN","playerData");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.playerData=void 0;var i=cc._decorator,c=i.ccclass,s=(i.property,t("./configuration")),l=t("./constant"),u=t("./util"),d=t("../framework/localConfig"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.serverTime=0,e.localTime=0,e.showCar=0,e.isComeFromBalance=!1,e.userId="",e.playerInfo={},e.history=null,e.settings=null,e.isNewBee=!1,e.dataVersion="",e.signInInfo=null,e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance?this._instance:(this._instance=new n,this._instance)},enumerable:!1,configurable:!0}),e.prototype.loadGlobalCache=function(){var t=s.configuration.instance.getUserId();t&&(this.userId=t)},e.prototype.loadFromCache=function(){this.playerInfo=this.loadDataByKey(l.constant.LOCAL_CACHE.PLAYER),this.playerInfo.currentCar?this.showCar=this.playerInfo.currentCar:this.showCar=l.constant.INITIAL_CAR,this.history=this.loadDataByKey(l.constant.LOCAL_CACHE.HISTORY),this.settings=this.loadDataByKey(l.constant.LOCAL_CACHE.SETTINGS)},e.prototype.loadDataByKey=function(t){var e={},n=s.configuration.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(r){e={}}return e},e.prototype.createPlayerInfo=function(t){if(this.playerInfo.level=1,this.playerInfo.gold=0,this.playerInfo.realLevel=1,this.playerInfo.passCheckPoint=!1,this.playerInfo.createDate=new Date,this.playerInfo.currentCar=l.constant.INITIAL_CAR,this.playerInfo.cars=[],this.playerInfo.cars.push(l.constant.INITIAL_CAR),this.playerInfo.dictBuyTask={},this.showCar=this.playerInfo.currentCar,this.isNewBee=!0,this.playerInfo.signInInfo={},this.playerInfo.dictGetCarTime={},t)for(var e in t)this.playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},e.prototype.saveAccount=function(t){this.userId=t,s.configuration.instance.setUserId(t)},e.prototype.savePlayerInfoToLocalCache=function(){s.configuration.instance.setConfigData(l.constant.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},e.prototype.saveAll=function(){s.configuration.instance.setConfigDataWithoutSave(l.constant.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),s.configuration.instance.setConfigDataWithoutSave(l.constant.LOCAL_CACHE.HISTORY,JSON.stringify(this.history)),s.configuration.instance.setConfigDataWithoutSave(l.constant.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings)),s.configuration.instance.setConfigData(l.constant.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},e.prototype.updatePlayerInfo=function(t,e){var n=!1;this.playerInfo.hasOwnProperty(t)?"number"==typeof e?(n=!0,this.playerInfo[t]+=e,this.playerInfo[t]<0&&(this.playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this.playerInfo[t]=e):"gold"===t&&(n=!0,this.playerInfo[t]=e),n&&s.configuration.instance.setConfigData(l.constant.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},e.prototype.updateSignInCurrentDay=function(){if(0===Object.keys(this.playerInfo.signInInfo).length||this.isNeedRecycleSignInInfo())this.createNewSignInInfo();else{var t=u.util.getDeltaDays(this.playerInfo.signInInfo.signInDate,Date.now());if(0===t)return;this.updateSignInFillSignInDays(0,!0),this.playerInfo.signInInfo.currentDay+=t,this.playerInfo.signInInfo.currentDay<=0&&this.createNewSignInInfo(),this.playerInfo.signInInfo.currentDay>l.constant.MAX_SIGNIN_DAY?l.constant.MAX_SIGNIN_DAY:this.playerInfo.signInInfo.currentDay,this.playerInfo.signInInfo.signInDate=Date.now()}this.savePlayerInfoToLocalCache()},e.prototype.createNewSignInInfo=function(){this.playerInfo.hasOwnProperty("signInInfo")||(this.playerInfo.signInInfo={},this.playerInfo.dictGetCarTime={});var t=this.playerInfo.signInInfo;t.createDate=Date.now(),t.signInDate=Date.now(),t.currentDay=1,t.receivedDays=[],t.afterFillSignInDays=[],this.savePlayerInfoToLocalCache()},e.prototype.isNeedRecycleSignInInfo=function(){this.playerInfo.signInInfo||this.createNewSignInInfo();var t=!1;return u.util.getDeltaDays(this.playerInfo.signInInfo.createDate,Date.now())>=l.constant.MAX_SIGNIN_DAY&&(t=!0),t},e.prototype.updateSignInReceivedDays=function(t){var e=this.playerInfo.signInInfo.receivedDays;Array.isArray(e)&&e.includes(t)||(e.push(Number(t)),this.savePlayerInfoToLocalCache())},e.prototype.updateSignInFillSignInDays=function(t,e){var n=this.playerInfo.signInInfo.afterFillSignInDays;if(e)n.length=0;else{if(Array.isArray(n)&&n.includes(t))return;n.push(Number(t))}this.savePlayerInfoToLocalCache()},e.prototype.getSignInReceivedInfo=function(){this.playerInfo.signInInfo||this.createNewSignInInfo();var t=this.playerInfo.signInInfo;return{isAllReceived:!(t.receivedDays.length<t.currentDay),isTodayReceived:!!t.receivedDays.includes(t.currentDay)}},e.prototype.isHadCarAndDuringPeriod=function(t){var e=this.playerInfo.signInInfo.createDate;this.playerInfo.dictGetCarTime||(this.playerInfo.dictGetCarTime={});var n=this.playerInfo.dictGetCarTime[t];return-1!==this.playerInfo.cars.indexOf(t)&&n&&n<e},e.prototype.updateDictGetCarTime=function(t){this.playerInfo.dictGetCarTime||(this.playerInfo.dictGetCarTime={}),this.playerInfo.dictGetCarTime[t]=this.playerInfo.signInInfo.createDate,s.configuration.instance.setConfigData(l.constant.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},e.prototype.getLastOnlineRewardTime=function(){return this.playerInfo.onlineRewardTime?this.playerInfo.onlineRewardTime:(this.playerInfo.onlineRewardTime=this.getCurrentTime(),this.savePlayerInfoToLocalCache(),this.playerInfo.onlineRewardTime)},e.prototype.updateLastOnlineRewardTime=function(t){var e=this.getCurrentTime()-1e3*t;this.playerInfo.onlineRewardTime=e,this.savePlayerInfoToLocalCache()},e.prototype.syncServerTime=function(t){this.serverTime=t,this.localTime=Date.now()},e.prototype.getCurrentTime=function(){var t=Date.now()-this.localTime;return this.serverTime+t},e.prototype.hasCar=function(t){return t===l.constant.INITIAL_CAR||(this.playerInfo.cars||(this.playerInfo.cars=[l.constant.INITIAL_CAR]),-1!==this.playerInfo.cars.indexOf(t))},e.prototype.hasCarCanReceived=function(){for(var t=d.localConfig.instance.getCars(),e=0;e<t.length;e++){var n=t[e];if(n.type!==l.constant.BUY_CAR_TYPE.GOLD&&n.type!==l.constant.BUY_CAR_TYPE.SIGNIN&&!this.hasCar(n.ID)&&this.playerInfo.dictBuyTask&&this.playerInfo.dictBuyTask.hasOwnProperty(n.type)&&this.playerInfo.dictBuyTask[n.type]>=n.num)return!0}return!1},e.prototype.finishBuyTask=function(t,e,n){this.playerInfo.dictBuyTask||(this.playerInfo.dictBuyTask={}),this.playerInfo.dictBuyTask.hasOwnProperty(t)&&n?this.playerInfo.dictBuyTask[t]+=e:this.playerInfo.dictBuyTask[t]=e,this.savePlayerInfoToLocalCache()},e.prototype.getBuyTypeProgress=function(t){return this.playerInfo.dictBuyTask&&this.playerInfo.dictBuyTask.hasOwnProperty(t)?this.playerInfo.dictBuyTask[t]:0},e.prototype.getCurrentCar=function(){return this.playerInfo.currentCar||(this.playerInfo.currentCar=l.constant.INITIAL_CAR),this.playerInfo.currentCar},e.prototype.useCar=function(t){return!!this.hasCar(t)&&(this.playerInfo.currentCar=t,this.savePlayerInfoToLocalCache(),this.showCar=this.playerInfo.currentCar,!0)},e.prototype.buyCar=function(t){return-1!==this.playerInfo.cars.indexOf(t)||(this.playerInfo.cars.push(t),this.savePlayerInfoToLocalCache(),!0)},e.prototype.clear=function(){this.playerInfo={},this.settings={},this.saveAll()},e.prototype.passLevel=function(t){this.playerInfo.level++,this.playerInfo.gold+=t,console.log("###1 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel),this.playerInfo.passCheckPoint?(this.playerInfo.realLevel=this.getRandLevel(),console.log("###3 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel)):this.playerInfo.level>=l.constant.MAX_LEVEL?(this.playerInfo.realLevel=l.constant.MAX_LEVEL,this.playerInfo.level=l.constant.MAX_LEVEL,this.playerInfo.passCheckPoint=!0,console.log("###2 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel)):this.playerInfo.realLevel=this.playerInfo.level,this.savePlayerInfoToLocalCache()},e.prototype.getRandLevel=function(){for(var t=-1;-1===t;){var e=16+Math.floor(5*Math.random());e!==this.playerInfo.realLevel&&(t=e)}return t},n=a([c("playerData")],e)}(cc.Component);n.playerData=p,cc._RF.pop()},{"../framework/localConfig":"localConfig","./configuration":"configuration","./constant":"constant","./util":"util"}],"polyglot.min":[function(t,e,n){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(t,r){"function"==typeof define&&define.amd?define([],function(){return r(t)}):"object"==typeof n?e.exports=r(t):t.Polyglot=r(t)}(void 0,function(t){function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||s}function n(t){var e,n,r,o={};for(e in t)if(t.hasOwnProperty(e))for(r in n=t[e])o[n[r]]=e;return o}function r(t){return t.replace(/^\s+|\s+$/g,"")}function o(t,e,n){var o;return null!=n&&t?r((o=t.split(u))[i(e,n)]||o[0]):t}function a(t){var e=n(p);return e[t]||e.en}function i(t,e){return d[a(t)](e)}function c(t,e){for(var n in e)"_"!==n&&e.hasOwnProperty(n)&&(t=t.replace(new RegExp("%\\{"+n+"\\}","g"),e[n]));return t}function s(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function l(t){var e={};for(var n in t)e[n]=t[n];return e}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var n;for(var r in t)t.hasOwnProperty(r)&&(n=t[r],e&&(r=e+"."+r),"object"==typeof n?this.extend(n,r):this.phrases[r]=n)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,r;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),r=t),"string"==typeof n&&(e=l(e),r=c(r=o(n,this.currentLocale,e.smart_count),e)),r},e.prototype.has=function(t){return t in this.phrases};var u="||||",d={chinese:function(){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},p={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e}),cc._RF.pop()},{}],poolManager:[function(t,e,n){"use strict";cc._RF.push(e,"907776q4iZNubarZf3Ut3A8","poolManager");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.poolManager=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){this.dictPool={},this.dictPrefab={}}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!1,configurable:!0}),t.prototype.getNode=function(t,e){var n,r=t.data.name;if(this.dictPrefab[r]=t,this.dictPool.hasOwnProperty(r))n=(o=this.dictPool[r]).size()>0?o.get():cc.instantiate(t);else{var o=new cc.NodePool;this.dictPool[r]=o,n=cc.instantiate(t)}return n.parent=e,n},t.prototype.putNode=function(t){var e=t.name,n=null;this.dictPool.hasOwnProperty(e)?n=this.dictPool[e]:(n=new cc.NodePool,this.dictPool[e]=n),n.put(t)},t.prototype.clearPool=function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()},e=r([a("poolManager")],t)}());n.poolManager=i,cc._RF.pop()},{}],resourceUtil:[function(t,e,n){"use strict";cc._RF.push(e,"aebeeEGJRZGbK315QTzsoll","resourceUtil");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.resourceUtil=void 0;var i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.loadRes=function(t,e,n){e?cc.loader.loadRes(t,e,function(t,e){if(t)return cc.error(t.message||t),void(n&&n(t,e));n&&n(null,e)}):cc.loader.loadRes(t,function(t,e){if(t)return cc.error(t.message||t),void(n&&n(t,e));n&&n(null,e)})},e.getMap=function(t,e){var n="map";n+=t>=100?t:t>=10?"0"+t:"00"+t,this.loadRes("gamePackage/map/config/"+n,null,function(t,n){if(t)e(t,n);else{var r=n,o="";if(r._file){globalThis.LZString&&(o=globalThis.LZString.decompressFromEncodedURIComponent(r._file));var a=JSON.parse(o);e(null,a)}else if(r.text)globalThis.LZString&&(o=globalThis.LZString.decompressFromEncodedURIComponent(r.text)),a=JSON.parse(o),e(null,a);else if(r.json)e(null,r.json);else{var i=new Error("failed");e(i,null)}}})},e.getMapObjs=function(t,e,n,r){for(var o=[],a=0;a<e.length;a++)o.push("gamePackage/map/"+t+"/"+e[a]);cc.loader.loadResArray(o,cc.Prefab,n,r)},e.getUIPrefabRes=function(t,e){this.loadRes("prefab/ui/"+t,cc.Prefab,e)},e.createUI=function(t,e,n){this.getUIPrefabRes(t,function(t,r){if(!t){var o=cc.instantiate(r);o.setPosition(0,0,0),n||(n=cc.find("Canvas")),n.addChild(o),e&&e(null,o)}})},e.getCarsBatch=function(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push("prefab/car/car"+t[o]);for(var a=0;a<r.length;a++){var i=r[a];e?cc.loader.loadRes(i,cc.Prefab,e,n):cc.loader.loadRes(i,cc.Prefab,n)}},e.getUICar=function(t,e){this.loadRes("prefab/ui/car/uiCar"+t,cc.Prefab,e)},e.getCar=function(t,e){this.loadRes("prefab/car/car"+t,cc.Prefab,e)},e.setCarIcon=function(t,e,n,r){var o="gamePackage/texture/car/car"+t;n&&(o+="Black"),this.setSpriteFrame(o,e,r)},e.getJsonData=function(t,e){cc.loader.loadRes("datas/"+t,function(t,n){if(t)cc.error(t.message||t);else{var r=n;if(r.json)e(t,r.json);else{var o=new Error("failed!!!");e(o,null)}}})},e.getData=function(t,e){cc.loader.loadRes("datas/"+t,function(t,n){if(t)cc.error(t.message||t);else{var r=n.text;r?e(t,r):cc.loader.load(n.nativeUrl,function(t,n){e(t,r=n)})}})},e.setSpriteFrame=function(t,e,n){this.loadRes(t+"/spriteFrame",cc.SpriteFrame,function(r,o){if(r)return console.error("set sprite frame failed! err:",t,r),void n(r,o);e&&cc.isValid(e)&&(e.spriteFrame=o,n(null,o))})},e.getCustomer=function(t,e){this.loadRes("gamePackage/map/customer/customer"+t,cc.Prefab,e)},e.setCustomerIcon=function(t,e,n){var r="gamePackage/texture/head/head"+t;this.setSpriteFrame(r,e,n)},e.getEffect=function(t,e){this.loadRes("prefab/effect/"+t,cc.Prefab,e)},a([c],e)}(cc.Component));n.resourceUtil=s,cc._RF.pop()},{}],uiManager:[function(t,e,n){"use strict";cc._RF.push(e,"ae98dhzQlZL2p1SbDgvNdoJ","uiManager");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.uiManager=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,t("./resourceUtil")),c=t("./poolManager"),s=function(){function t(){this.dictSharedPanel={},this.dictLoading={},this.arrPopupDialog=[],this.showTipsTime=0}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!1,configurable:!0}),t.prototype.showDialog=function(t,e,n,r,o){var a;if(a=null==n?t:t+n,!this.dictLoading[a]){var i=t.lastIndexOf("/"),c=t.slice(i+1);if(r||(r=[]),this.dictSharedPanel.hasOwnProperty(a)){var s=this.dictSharedPanel[a];if(cc.isValid(s)){s.parent=cc.find("Canvas/DialogParent"),s.active=!0;var l=s.getComponent(c);return l.show&&l.show.apply(l,r),void(o&&o(l))}}this.dictLoading[a]=!0;var u=cc.instantiate(e);u.setPosition(0,0,0),cc.find("Canvas/DialogParent").addChild(u);var d=!1;this.dictLoading[a]||(d=!0),this.dictLoading[a]=!1,this.dictSharedPanel[a]=u;var p=u.getComponent(c);p.show&&p.show.apply(p,r),o&&o(p),d&&this.hideDialog(t)}},t.prototype.hideDialog=function(t,e,n){var r;if(r=null==e?t:t+e,this.dictSharedPanel.hasOwnProperty(r)){var o=this.dictSharedPanel[r];o&&cc.isValid(o)?(o.parent=null,o.destroy(),n&&"function"==typeof n&&n()):n&&"function"==typeof n&&n()}this.dictLoading[r]=!1},t.prototype.pushToPopupSeq=function(t,e,n){var r={panelPath:t,scriptName:e,param:n,isShow:!1};this.arrPopupDialog.push(r),this.checkPopupSeq()},t.prototype.insertToPopupSeq=function(t,e,n){var r={panelPath:e,param:n,isShow:!1};this.arrPopupDialog.splice(t,0,r)},t.prototype.shiftFromPopupSeq=function(t){var e=this;this.hideDialog(t,void 0,function(){e.arrPopupDialog[0]&&e.arrPopupDialog[0].panelPath===t&&(e.arrPopupDialog.shift(),e.checkPopupSeq())})},t.prototype.checkPopupSeq=function(){if(this.arrPopupDialog.length>0){var t=this.arrPopupDialog[0];t.isShow||(this.showDialog(t.panelPath,t.param),this.arrPopupDialog[0].isShow=!0)}},t.prototype.showTips=function(t,e){var n=Date.now();if(n-this.showTipsTime<800){var r=800-(n-this.showTipsTime),o=this;setTimeout(function(t,e){o._showTipsAni(t,e)}.bind(this,t,e),r),this.showTipsTime=n+r}else this._showTipsAni(t,e),this.showTipsTime=n},t.prototype._showTipsAni=function(){i.resourceUtil.getUIPrefabRes("common/tips",function(t,e){t||c.poolManager.instance.getNode(e,cc.find("Canvas/DialogParent"))})},e=r([a("uiManager")],t)}();n.uiManager=s,cc._RF.pop()},{"./poolManager":"poolManager","./resourceUtil":"resourceUtil"}],util:[function(t,e,n){"use strict";cc._RF.push(e,"f1bcdp9t1BPdo0rL87xRyba","util");var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.util=void 0;var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function t(){}return t.clone=function(t){if(null===t||"object"!=typeof t)return t;var e={};for(var n in t.constructor===Array&&(e=[]),t)t.hasOwnProperty(n)&&(e[n]=this.clone(t[n]));return e},t.objectToArray=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},t.arrayToObject=function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&t[r][e]&&(n[t[r][e]]=t[r]);return n},t.getWeightRandIndex=function(t,e){for(var n=Math.floor(Math.random()*e),r=0,o=0;o<t.length&&!(n<(r+=t[o]));o++);return o},t.getRandomNFromM=function(t,e){for(var n=[],r=0,o=0;o<e&&!(o>=t+1);){r=this.getRandomInt(0,t);for(var a=0,i=0;i<o;i++)if(n[i]===r){a=1;break}0===a&&(n[o]=r,o++)}return n},t.getRandomInt=function(t,e){var n=Math.random()*(e-t+1)+t;return Math.floor(n)},t.getStringLength=function(t){for(var e=t,n=0,r=0,o=e.length;r<o;r++)n+=e.charCodeAt(r)<=255?1:2;return Math.ceil(n/2)},t.isEmptyObject=function(t){var e=!0;if(t&&t.constructor===Object){for(var n in t)if(t.hasOwnProperty(n)){e=!1;break}}else e=!1;return e},t.formatNum=function(t){if(t<=0)return"0";var e=Math.round(Math.log(t)/Math.log(1e3));return parseInt((t/Math.pow(1e3,e-1<0?0:e-1)).toString(),10)+["","","K","M","B"][e]},t.isNewDay=function(t){var e=new Date(t),n=new Date,r=e.getFullYear(),o=e.getMonth(),a=e.getDate(),i=n.getFullYear(),c=n.getMonth(),s=n.getDate();return i>r||c>o||s>a},t.getPropertyCount=function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},t.difference=function(t,e){var n=[];if(t.constructor!==Array||e.constructor!==Array)return n;for(var r=t.length,o=0;o<r;o++)-1===e.indexOf(t[o])&&n.push(t[o]);return n},t.simulationUUID=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.trim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},t.isNowValid=function(t,e){var n=new Date(t),r=new Date(e),o=!1;if(n.getDate()+""!="NaN"&&r.getDate()+""!="NaN"){var a=new Date;o=a<r&&a>n}return o},t.getDeltaDays=function(t,e){var n=new Date(t),r=new Date(e),o=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),c=r.getFullYear(),s=r.getMonth()+1,l=r.getDate();t=new Date(o+"/"+a+"/"+i+" GMT+0800").getTime();var u=(e=new Date(c+"/"+s+"/"+l+" GMT+0800").getTime())-t;return Math.floor(u/864e5)},t.getMin=function(t){var e=0;if(t.constructor===Array)for(var n=t.length,r=0;r<n;r++)e=0===r?Number(t[0]):e>Number(t[r])?Number(t[r]):e;return e},t.formatTwoDigits=function(t){return(Array(2).join("0")+t).slice(-2)},t.formatDate=function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?""+n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},t.getDay=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},t.formatMoney=function(t){for(var e=["","K","M","G","T","P","E","Z","Y","B","N","D"],n="",r=0;r<e.length;r++){if(!(t>=1e4)){n=Math.floor(t)+e[r];break}t/=1e3}return""===n&&(n=Math.floor(t)+"U"),n},t.formatTimeForSecond=function(t){var e="",n=t%60,r=Math.floor(t/60);r=r<0?0:r;var o=Math.floor(r/60),a=r%60;return o>0&&(e+=o>9?o.toString():"0"+o,e+=":"),e+=a>9?a.toString():"0"+a,(e+=":")+(n>9?n.toString():"0"+n)},t.formatTimeForMillisecond=function(t){var e=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60),r=Math.floor(t/1e3/60/60);return(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)},t.zip=function(t){var e=pako.gzip(encodeURIComponent(t),{to:"string"});return this.base64encode(e)},t.rand=function(t){for(var e=this.clone(t),n=e.length-1;n>=0;n--){var r=Math.floor(Math.random()*(n+1)),o=e[r];e[r]=e[n],e[n]=o}return e},r([a("util")],t)}());n.util=i,cc._RF.pop()},{}]},{},["LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min","AssetLoader","Constant","GameManager","Global","MainMenuManager","ModelManager","UIManager","GameRoot","audioManager","clientEvent","configuration","constant","csvManager","eventListener","localConfig","lodash","oneToMultiListener","playerData","poolManager","resourceUtil","uiManager","util","BlindSelectGroup","Card","CardCount","Deck","FullDeckModal","StartOptionDialog"]);